\documentclass{amsart}

\usepackage[colorlinks=true]{hyperref}
\usepackage{enumerate}
\usepackage{color}
\usepackage{mathrsfs}
\usepackage{tikz-cd}
\usepackage{amssymb}
\usepackage{centernot}

\usepackage{marginnote}
\renewcommand*{\marginfont}{\scriptsize\color{red}\sffamily}

\input{macros.tex}

\newcommand{\fsl}[1]{{\centernot{#1}}}
\renewcommand\d{\mathsf{D}}

\DeclareMathOperator{\Fun}{Fun}
\DeclareMathOperator{\Emb}{Emb}
\DeclareMathOperator{\Conf}{Conf}
\DeclareMathOperator{\Sing}{Sing}
\DeclareMathOperator{\cyl}{cyl}
\DeclareMathOperator{\hofiber}{hofiber}
\DeclareMathOperator{\hocolim}{hocolim}
\DeclareMathOperator{\ev}{ev}
\DeclareMathOperator{\sk}{sk}

\newcommand{\disk}{\mathsf{Disk}_n}
\newcommand{\diskm}{\mathsf{Disk}_{n/M}}
\newcommand{\diskf}{\mathsf{Disk}_n^\text{fr}}
\newcommand{\diskr}{\mathsf{Disk}_n^\text{rect}}
\newcommand{\Disk}{\mathscr{D}\mathsf{isk}_n}
\newcommand{\Diskf}{\mathscr{D}\mathsf{isk}_n^\text{fr}}
\newcommand{\Diskr}{\mathscr{D}\mathsf{isk}_n^\text{rect}}
\newcommand{\Diskir}{\mathscr{D}\mathsf{isk}_\infty^\text{rect}}

\newcommand{\mfld}{\mathscr{M}\mathsf{fld}_n}
\newcommand{\mfldm}{\mathscr{M}\mathsf{fld}_{n/M}}
\newcommand{\mfldd}{\mathscr{M}\mathsf{fld}_n^\partial}

\title{Factorization Homology}
\author{John Francis}
\date{Fall 2017}

\begin{document}
\maketitle
\tableofcontents

These are notes from John Francis' ``Factorization homology'' course 
taught during the Fall quarter of the 2017 year at Northwestern. 
Errors and inaccuracies are, as usual, due to the notetaker(s).


\section{What is factorization homology? [09/20/17]}

\subsection{Introduction}

What is factorization homology? Well, if it were an animal, I could describe it in two ways:
distribution and phylogeny. More specifially, we will first see how factorization
homology is distributed over the face of the planet.
Then we will describe how it evolved from single-celled organisms, i.e. how you
might come up with it yourself.

For the moment you can think of factorization homology as a sort of 
\begin{quote}
    \textbf{generalized (co)sheaf homology.}
\end{quote}
Notice that this phrase can be hyphenated in two different ways. In one sense it is a
generalization of the ideas of sheaf cohomology, and in the other it is a homology theory
for generalized sheaves (or sheaf-like objects).
In particular, factorization homology is a machine that takes two inputs:
a geometry $M$ and an algebraic object $A$. The output is
\begin{equation*}
    \int_M A,
\end{equation*}
the factorization homology of with coefficients in $A$.


\subsection{Examples}
Let's look at the first description: what are some examples of factorization homology
that appear naturally in mathematics?
\begin{enumerate}
    \item \textbf{Homology.} Here $M$ is a topological space and $A$ is an abelian group.
        In this case the output is a chain complex
        \begin{equation*}
            \int_M A \simeq \HH_\bullet(M,A),
        \end{equation*}
        quasiisomorphic to singular homology with coefficients in $A$.
        \marginnote{John: What is a theorem you can't prove without ordinary homology?}

    \item  \textbf{Hochschild homology.} Here $M$ is a one-dimensional manifold -- let's
        take in particular $M=S^1$ -- and $A$ will be an associative algebra. In this case
        \begin{equation*}
            \int_{S^1} A \simeq \text{HH}_\bullet A,
        \end{equation*}
        the Hochschild homology of $A$.
        You might be less familiar with this algebraic object than ordinary
        homology. It's importance comes from how it underlies trace methods
        in algebra (e.g. characteristic 0 representations of finite groups).
        Hochschild homology is a recipient of ``the universal trace'' and hence
        an important part of associative algebra. Note that
        $\text{HH}_0A=A/[A,A]$.
        
    \item \textbf{Conformal field theory.} This is in some sense the real starting point
        for the ideas we will develop in this class. Here $M$ is a smooth complete etc.
        algebraic curve over $\C$ and $A$ is a vertex algebra. In this case
        the output $\int_M A$ was constructed by Beilinson and Drinfeld, and
        is known as chiral homology of $M$ with coefficients in $A$. It is
        a chain complex, with $\HH_0(\int_M A)$ being the space of conformal blocks of
        the conformal field theory.

    \item \textbf{Algebraic curves over $\F_q$.} Here $M$ is an algebraic curve over $\F_q$
        and $G$ is a connected algebraic group over $\F_q$. In this case $\int_MG$ is known
        as the Beilinson-Drinfeld Grassmannian and is a stack. One interesting
        property that it has is that
        \begin{equation*}
            \HH_\bullet\left(\int_M G,\bar\Q_\ell\right) \simeq \HH_\bullet(\text{Bun}_G(M),\bar\Q_\ell),
        \end{equation*}
        where here we are taking $\ell$-adic cohomology.
        Although the Beilinson-Drinfeld Grassmannian is more complicated than the
        stack of principal $G$-bundles, it is more easily manipulated.
        We note that the equivalence above is a form of nonabelian Poincar\'e duality.

        In particular, one might be interested in computing
        \begin{equation*}
            \chi(\text{Bun}_G(M)) = \sum_{[P]}\frac{1}{|\Aut(P)|},
        \end{equation*}
        which makes sense over a finite field. The computation of this quantity is
        known as Weil's conjecture on Tamagawa numbers.

    \item \textbf{Topology of mapping spaces.} Now $M$ is an $n$-manifold without boundary and $A$ will be an
        $n$-fold loop space, $A=\Omega^nZ=\Maps( (D^n,\partial D^n),(Z,*))$. The
        output is a space weakly homotopy equivalent to $\Maps_c(M,Z)$ if $\pi_iZ=0$ for $i<n$.
        This is also known as nonabelian Poincar\'e duality. Again the left hand
        side is more complicated but more easily manipulated.

    \item \textbf{$n$-disk algebra (perturbative TQFT).}
        Here $M$ is an $n$-manifold and $A$ is an $n$-disk algebra (or an $E_n$-algebra)
        in chain complexes. The output is a chain complex and has some sort of interpretation
        in physics. One thinks of $A$ as the algebra of observables on $\R^n$, and
        $\int_M A$ is the global observables (in some derived sense). In a rough
        cartoon of physics, one assigns to opens sets of observables, and a way to copmute
        expectation values. Factorization homology puts together local observables to global
        observables:
        \begin{equation*}
            \text{Obs}(M) \simeq \int_M A,
        \end{equation*}
        at least if we are working in perturbative QFT.

    \item \textbf{TQFT.} Here $M$ is an $n$-manifold (maybe with a framing) and $A$ is an
        $(\infty,n)$-category (enriched in $\mathcal{V}$).
        The output is a space (if enriched, an object of $\mathcal{V}$), which
        is designed to remove the assumptions from the examples above.
\end{enumerate}

That's all the examples for now. Next class we'll go over how one might have come up
with factorization homology. It is worth noting that in this class we will focus
on learning factorization homology as a \textbf{tool} instead of aiming to reach
some fancy theorem. Hopefully this will teach you how to apply it in contexts you
might be interested in.

\textbf{Pax:} What is the physical interpretation of the first and second chiral
homologies? \textbf{John:} One might be interested in things like Wilson lines,
where these higher homology groups come into play.


\newpage
\section{How to come up with factorization homology yourself [09/22/17]}

\subsection{Kan extensions}

Consider the following
thought experiment. Suppose you want to study objects in some context $\mathcal{M}$.
Unfortunately objects here are pretty hard in general. Inside $\mathcal{M}$, however,
we have some objects $\mathcal{D}\subset \mathcal{M}$ that are particulary simple,
and moreover we know that everything else in $\mathcal{M}$ is ``built out of'' objects in $\mathcal{D}$.

Let's consider the example where $\mathcal{M}$ is a nice category of (homotopy types of)
topological spaces. Let $\mathcal{D}$ consist of the point, i.e. all contractible spaces.
Now to study $\mathcal{M}$ we might map functors out of it into some category $\mathcal{V}$.
Let's start with $\mathcal{D}$ instead. Consider $\Fun(*, \mathcal{V})$.
Of course this is canonically just $\mathcal{V}$. How do we extend this to studying $\mathcal{M}$?
We have an obvious restriction map
\begin{equation*}
    \begin{tikzcd}
        \Fun(\mathcal{M},\mathcal{V}) \rar{\ev_*} & \Fun(*, \mathcal{V}).
    \end{tikzcd}
\end{equation*}
We want to look for a left adjoint to this functor $\ev_*$
\marginnote{John: If you don't know what a left adjoint is you should learn it because I won't tell you.
No, I'm not joking (laughs).}
There are two different
things we could do. We could ignore the homotopy-ness of everything, and take the naive
categorical left-adjoint. If, say $\mathcal{V}$ is the category of chain complexes, this naive
left-adjoint produces a stupid answer\ldots depending on what our precise definitions are.
Let's suppose that by $\mathcal{M}$ we meant the homotopy category of spaces (here objects are spaces
and maps are sets of homotopy classes of maps).
Then we are extending
\begin{equation*}
    \begin{tikzcd}
        *\rar{A}\dar & \mathcal{V}\\
        \mathsf{hoSpaces}\urar[dashed]
    \end{tikzcd}
\end{equation*}
A naive left adjoint would take the functor $A$ to the functor sending a space $X$ to the
stupid answer $A^{\oplus \pi_0X}$ (on morphisms take summands to summands corresponding
to where the connected components are sent).
\marginnote{Why is this a left adjoint?}
Similarly if we take $\mathcal{M}$ to be just spaces and all continuous maps, $X$ would
be sent to $A^{\oplus X}$. Here by $X$ we mean the underlying set of elements of $X$.

There is a more sophisticated notion of a derived or homotopy left adjoint.
Suppose now that by $\mathcal{M}$
we mean the topological category of spaces, where the mapping sets are spaces equipped
with the compact-open topology. Now we take a \textit{homotopy} Kan extension. This
fancy left adjoint will now send a space $X$ to the the chain complex $C_*(X, A)$
(up to equivalence). Hence we see that we can recover homology from this paradigm
of extending a simpler invariant to the whole category.

How do we choose what $\mathcal{D}$ and $\mathcal{M}$ are? Suppose we want to study
$\mathcal{F}(M)$ for $M\in\mathcal{M}$. For concreteness, let's say we're studying
manifolds. The most basic question to ask: is there a local-to-global principle for
$\mathcal{F}$? The simplest case is for $\mathcal{F}$ to be a sheaf, i.e.
\begin{equation*}
    \begin{tikzcd}
        \mathcal{F}(M) \rar{\sim} & \lim_{U\in\mathcal{U}} \mathcal{F}(U).
    \end{tikzcd}
\end{equation*}
If so you don't need factorization homology, and you can just leave.

For instance, consider $\mathcal{F}=C_*(\Maps(\cdot, Z))$ taking spaces to chain
complexes. Is this a sheaf? Well if we forget about $C_*$, we get a sheaf, as a
map into $Z$ is the same as giving maps on subsets of the domain that agree on overlaps.
What does
taking chains do? Well notice that
\begin{align*}
    C_*(\Maps(U\coprod V,Z)) &= C_*(\Maps(U,Z)\times\Maps(V,Z))\\
    &= C_*(\Map(U,Z)) \otimes C_*(\Maps(V,Z)).
\end{align*}
This is not a sheaf because in this case tensor products and direct sums are never
the same for these chain complexes! \marginnote{Why?}
So what can we do? We need to change what we consider $\mathcal{D}$ to be from
open coverings to something else.

\textbf{Idea:} to study $\mathcal{F}$ maybe there are more general arrangements of
$\mathcal{D}\subset\mathcal{M}$ such that local-to-global principles still apply, without
$\mathcal{F}$ being a sheaf.

\subsection{Manifolds}

The following problem will guide us for the next few weeks.
\begin{quote}
    Let $M$ be a manifold and let $Z$ be a space.
    Calculate the homology of the mapping space $\HH_\bullet\Maps(M,Z)$.
\end{quote}

To begin, let us specify which categories we will be working with.
\begin{definition}
    Let $\mathsf{Mfld}_n$ be the (ordinary) category of smooth $n$-manifolds, with
    $\Hom(M,N)=\Emb(M,N)$ the set of smooth embeddings of $M$ into $N$.
    Similarly, 
    let $\mathcal{M}\mathsf{fld}_n$ be the \textit{topological} category of smooth $n$-manifolds, with
    $\Hom(M,N)=\Emb(M,N)$ the \textit{space} of smooth embeddings of $M$ into $N$, equipped with the
    compact open smooth topology.
\end{definition}

The compact open smooth topology takes a bit of work to define, so we'll leave that
as background reading. A good reference is Hirsch's book on differential topology \cite{hirsch}.
Roughly, convergence in this topology is pointwise in the map as well as all its derivatives.
To get a feel for what this entails, consider a knot. Locally tighten the knot
until the knot turns (locally) into a line. These knots would would converge in the usual compact-open
topology to another knot, but in the smooth topology, they do not converge as the
tightening procedure creates sharp kinks.
In particular $\pi_0\text{Emb}(S^1,\R^3)$ is very different from
$\pi_0\text{Emb}^\text{top}(S^1,\R^3)$.

\begin{definition}
    We define the category $\mathsf{Disk}_n$ to be the full subcategory of
    $\mathsf{Mfld}_n$ where the objects are finite disjoint unions of standard
    Euclidean spaces $\coprod_I\R^n$. Similarly the category $\mathcal{D}\mathsf{isk}_n$
    is the full \textit{topological} subcategory of $\mathcal{M}\mathbf{fld}_n$ where the objects
    are finite disjoint unions of Euclidean space.
\end{definition}

Observe that $\Hom_{\mathcal{D}\mathsf{isk}_n}(\R^n,\R^n)=\text{Emb}(\R^n,\R^n)$.
\begin{lemma}
    The map $\Emb(\R^n,\R^n)\to GL_n(\R)\simeq O_n\R$ given by differentiating
    at the origin is a homotopy equivalence.
\end{lemma}
\begin{proof}[Proof sketch]
    There is an obvious map $GL_n\R \to \Emb(\R^n,\R^n)$. One of the composites is
    thus clearly the identity. It remains to show that the other composition is
    homotopic to the identity. The homotopy is given by shrinking the embedding
    down to zero.
\end{proof}

This fact should fill you with hope. The objects which are building blocks of manifolds
have automorphism spaces that are, up to homotopy, just finite-dimensional manifolds.
Actually it will be useful to think of the $n$-disks as some sort of algebra.

\begin{definition}
    An $n$-disk algebra in $\mathcal{V}$ is a symmetric monoidal functor
    $A:\mathcal{D}\mathsf{isk}_n\to\mathcal{V}$.
\end{definition}

As we stated before, our first goal in this class is to understand the homology 
$\HH_*\Maps(M,Z)$ using $n$-disk algebras and factorization homology.

Question from someone: what's the relation with $E_n$-algebras? John: It turns
out that $E_n$-algebras are equivalent to $n$-disk algebras with framing.

Question from Tochi: what if you work with manifolds with boundary? John: well
if you require boundaries to map to boundaries you can make the same definitions.
You then have to work with Euclidean spaces and half-spaces. You'll end up
with two types of algebras instead of just $n$-disk algebras.

\newpage
\section{Framings [09/25/17]}

\subsection{Framed embeddings, naively}

\begin{definition}
    A \textbf{framing} of an $n$-manifold $M$ is an isomorphism of vector bundles
    $TM \cong M\times \R^n$.
\end{definition}

Of course, not all manifolds have framings. For instance, one
can check that all (compact oriented) two-manifolds except for $S^1\times S^1$ do not admit framings.
You might use the Poincar\'e-Hopf theorem, which expresses the Euler characteristic
as a sum of the index of the zeroes of a vector field $v$ on $M$ that has isolated
zeroes. Hence if $M$ is framed, the Euler characteristic of $M$ must be zero.

Here is an example of a theorem that John does not know how to prove without the use of homology.
\begin{theorem}[Whitney or Wu]
    Every orientable three-manifold admits a framing.
\end{theorem}
Pax: isn't there a later proof of this via geometric methods by Kirby? John: well ok
\textit{I} don't know how to prove it without homology\ldots

Notice that any Lie group has a framing, as one takes a basis for the Lie algebra
and pushes it forward by the group action. On the other hand, manifolds of dimension
four generally do not have framings (at least in John's experience).

We can ask the following question: what is a framed open embedding? There are a few options.
The naive (strict) option is as follows. Suppose that we have an open embedding $M\hookrightarrow N$
of framed manifolds. The pullback of $TN$ is $TM$, we have two different trivializations
of $TM$. We might ask that the induced map of trivial bundles $M\times\R^n\to M\times\R^n$
be the identity. In other words, we ask the two framings to be the same.

Okay fine, but lets think about what we want the answer to be. Embeddings are very flexible
you can stretch them and twist them.
But strict framed embeddings are very rigid the way we've defined them above.
For instance, they are automatically isometries (giving the fibers the usual Euclidean metric).
But of course there aren't very many isometric embeddings into a compact manifold.
Thus the strict definition of a framed embedding is not what we want to work with.

\subsection{Framed embeddings, homotopically}

Let's consider a more lax definition. Thinking homotopy theoretically,
recall that the tangent bundle is classified by a map $TM: M\to \Gr_n\R^\infty$. This map is
of course defined only up to homotopy. That's fine, just choose a representative. Over
the infinite Grassmannian we have the infinite Stiefel manifold $V_k(\R^\infty)\to\Gr_n\R^\infty$.
Choosing a lift
\begin{equation*}
    \begin{tikzcd}
        \; & V_n\R^\infty \dar \\
        M \rar{TM}\urar[dashed]{\phi_M} & \Gr_n\R^\infty
    \end{tikzcd}
\end{equation*}
is precisely the data of a framing. \marginnote{Why?}
Suppose now that we have an embedding $M\hookrightarrow N$ where $M,N$ are framed by
$\phi_M$ and $\phi_N$ respectively.
The lax definition of a framed embedding is now going to be extra data: an embedding
together with a homotopy between the framings $\phi_M$ and $\phi_N|_M$.

\begin{definition}
    The space of framed embeddings $\Emb^{fr}(M,N)$ is the homotopy pullback
    \begin{equation*}
        \begin{tikzcd}
            \Emb^{fr}(M,N) \rar\dar & \Emb(M,N)\dar  \\
            \Maps_{V_n\R^\infty}(M,N) \rar & \Maps_{\Gr_n\R^\infty}(M,N)
        \end{tikzcd}
    \end{equation*}
    In particular a framed embedding is an embedding $M\hookrightarrow N$ and
    a homotopy in $\Map_{\Gr_n\R^\infty}(M,N)$ between the images along each map.
\end{definition}

\begin{exercise}
    Check that $V_n\R^\infty\simeq *$.
\end{exercise}

With all this talk of homotopy pullbacks (which we'll talk about in more detail
next time)
it looks like we've made things more complicated, whereas we introduced framings
to make things simpler.
Let's calculate $\Emb^{fr}(\R^n, \R^n)$ as an example.
By definition, this sits in the following diagram
\begin{equation*}
    \begin{tikzcd}
        \Emb^{fr}(\R^n, \R^n) \rar\dar & \Emb(\R^n, \R^n)\dar \\
        \Maps_{V_n\R^\infty}(\R^n, \R^n) \rar & \Maps_{\Gr_n\R^\infty}(\R^n,\R^n).
    \end{tikzcd}
\end{equation*}
Notice that the bottom left object is homotopy equivalent to $\Maps_*(\R^n,\R^n)\simeq *$.
The bottom right space is homotopy equivalent to the loop space $\Omega\Gr_n\R^\infty\simeq \Omega BO(n)\simeq O(n)$.
From last time, $\Emb(\R^n,\R^n)\simeq \Diff(\R^n)\simeq GL(n)\simeq O(n)$ (this is
\textbf{homework 1}). Now the vertical map on the right is a homotopy equivalence.
This implies (by some machinery) that the vertical map on the left is an equivalence.
We conclude that
\begin{equation*}
    \Emb^{fr}(\R^n,\R^n)\simeq *.
\end{equation*}
The rest of \textbf{homework 1} is to
show that $\Emb(\R^n, N)$ is homotopy equivalent to the frame bundle of $TN$. Applying this
to the diagram above where we replace the second copy of $\R^n$ with $N$, we obtain
\begin{equation*}
    \begin{tikzcd}
        \Emb^{fr}(\R^n, N) \rar\dar & \Emb(\R^n, N)\dar \\
        \Maps_{V_n\R^\infty}(\R^n, N) \rar & \Maps_{\Gr_n\R^\infty}(\R^n,N).
    \end{tikzcd}
\end{equation*}
Now the same argument will show that the vertical map on the right is an equivalence,
and that the map of the left is an equivalence. It follows now that
\begin{equation*}
    \Emb^{fr}(\R^n,N)\simeq N.
\end{equation*}
Hence we see that by adding framings we are replacing the role of the orthogonal group
by that of a point. Indeed, this will allow for an easier transition between algebra and topology.
\begin{definition}
    We define the category $\Diskr$ to be the topological category consisting of 
    finite disjoint unions of open unit disks $\coprod_I D$ under rectilinear
    embeddings. In other words, embeddings which can be written as a composition
    of translations and dilations. Here we use the usual topology indcued from
    the smooth compact-open topology.
\end{definition}
One advantage of rectilinear embeddings is that they are easy to analyze.
For instance, the space of embeddings from a single disk to a single disk is contractible:
take an embedding, translate it to the origin, and the expand it outwards. In this
way $\Diskr(D,D)=\Emb^\text{rect}(D,D)$ deformation retracts onto the identity map.
More generally, one checks that there is a homotopy equivalence
\begin{equation*}
    \begin{tikzcd}
        \Diskr(\coprod D^n, D^n) \rar{\sim} & \Conf_k(D^n)
    \end{tikzcd}
\end{equation*}

Next time we will prove the following.
\begin{proposition}
    There is a homotopy equivalence $\Diskr \simeq \Diskf$.
\end{proposition}


\newpage
\section{Homotopy pullbacks and framing [09/27/17]}

Let's define more precisely some of the terms we used last time.

\subsection{Homotopy pullbacks}

\begin{definition}
    Suppose we have a map $f:X\to B$ together with a point $*\in B$. The homotopy fiber
    of $X\to B$ over $*\in B$ is the fiber product
    \begin{equation*}
        \hofiber(f:X\to B) := \{*\}\times_B\Maps([0,1], B)\times_B X.
    \end{equation*}
    In particular it is the space of triples $(*, \phi, x)$ where $\phi(0)=*$
    and $\phi(1)=f(x)$.
    \begin{equation*}
        \begin{tikzcd}
            \hofiber(f) \rar \dar & X\dar \\
            * \rar & B
        \end{tikzcd}
    \end{equation*}
\end{definition}

\begin{lemma}
    The formation of homotopy fibers is homotopy invariant. More precisely, given an weak
    equivalence of spaces $X\to X'$ over $B$ a pointed space via maps $f$ and $g$,
    \begin{equation*}
        \begin{tikzcd}
            X \ar[rr]\ar[rd]{f} &  & X'\ar[ld]{g} \\
            & B &
        \end{tikzcd}
    \end{equation*}
    then the homotopy fiber of $f$ is weakly equivalent to the homotopy fiber of $g$.
\end{lemma}
\begin{proof}
    Simply apply the (naturality of the) long exact sequence on homotopy groups for a
    Serre fibration to the map of fibrations \marginnote{Why are these fibrations?}
    \begin{equation*}
        \begin{tikzcd}
            \hofiber(f)\dar \ar[rr] & \; & \hofiber(g)\dar \\
            \Maps([0,1],B)\times_B X \ar[rr]\drar & \; & \Maps([0,1],B)\times_B X'\ar[dl] \\
            \; & B & 
        \end{tikzcd}
    \end{equation*}
    We conclude that $\pi_*\hofiber(f)\cong\pi_*\hofiber(g)$.
\end{proof}

\textbf{Homework 2}: Show, more generally, that homotopy pullbacks are homotopy invariant.

Recall last time we were discussing $\Maps_B(M,N)$ for some space $B$: maps ``over'' $B$.
This object is defined to be the homotopy
\begin{equation*}
    \begin{tikzcd}
        \Maps_B(M,N) \rar\dar & \Maps(M,N) \dar \\
        * \rar & \Maps(M,B)
    \end{tikzcd}
\end{equation*}
In our case the map on the bottom is (a choice of) the map classifying the tangent bundle of $M$.
Returning to last lecture, notice that by homotopy invariance we can argue that
$\Maps_{V_n\R^\infty}(M,N)\simeq \Maps(M,N)$ since $V_n\R^\infty\simeq*$.
Hopefully this background fills in some of the gaps we left open during last lecture.
\marginnote{But here we are using homotopy invariance in the base?}

\subsection{Framed vs rectilinear $n$-disks}

Let us now return to our assertion from last time. \marginnote{What is a homotopy equivalence of topological categories?}
\begin{proposition}
    There is a functor $\Diskr \to \Diskf$ which is a homotopy equivalence.
\end{proposition}
\begin{proof}
    Using the computations from last lecture we see that 
    \begin{equation*}
        \Diskf(\R^n, \R^n) \simeq * \simeq \Diskr(D^n, D^n).
    \end{equation*}
    What this functor does on objects is clear. On morphisms, the framing is determined
    by the dilation factor present in the rectilinear embeddings.
    More generally, consider
    \begin{equation*}
        \Diskr\left(\coprod_I D^n, \coprod_J D^n\right)=\coprod_{\pi:I\to J}\prod_J\Diskr\left(\coprod_{\pi^{-1}(j)}D^n,D^n\right).
    \end{equation*}
    So it suffices to show that
    \begin{equation*}
        \Diskf\left( \coprod_I\R^n,\R^n \right) \simeq \Diskr\left( \coprod_I D^n,D^n \right).
    \end{equation*}
    Recall that $\ev_0:\Diskr(\coprod D^n,D^n)\to \Conf_I(D^n)$ is a homotopy
    equivalence, which we mentioned ast time. Returning to our homotopy pullback square
    \begin{equation*}
        \begin{tikzcd}
            \Emb^{rect}(\coprod \R^n, \R^n) \rar\dar & \Emb(\coprod\R^n,\R^n)\dar \\
            *\simeq \Maps_{EO(n)}(\coprod \R^n,\R^n) \rar & \Maps_{BO(n)}(\coprod \R^n,\R^n)
        \end{tikzcd}
    \end{equation*}
    notice that
    \begin{equation*}
        \begin{tikzcd}
            \text{Fr}(TM)\simeq \Emb(\R^n, M)\dar{\ev_0} & \Emb( (\R^n,0), (M,x))\lar\dar \simeq O(n) \\
            M & \{x\}\lar
        \end{tikzcd}
    \end{equation*}
    Likewise
    \begin{equation*}
        \begin{tikzcd}
            \Emb(\coprod \R^n, M)\dar{\ev_0} & \prod_I O(n)\lar \dar\\
            \Conf_I(M) & \{x_1,\ldots,x_I\}\lar
        \end{tikzcd}
    \end{equation*}
    Hence $\Maps_{BO(n)}(\coprod\R^n,\R^n)\simeq \prod_I\Maps_{BO(n)}(\R^n,\R^n)\simeq\prod_IO(n)$.

    Up to homotopy, we now obtain
    \begin{equation*}
        \begin{tikzcd}
            \Emb^{fr}(\coprod\R^n,\R^n) \rar\dar & \Conf_I(\R^n)\times \prod_I O(n)\dar \\
            * \rar & \prod_I O(n)
        \end{tikzcd}
    \end{equation*}
    so we conclude that $\Emb^{fr}(\coprod\R^n,\R^n)\simeq \Conf_I(\R^n)$ which concludes
    the proof of the proposition.
\end{proof}

\begin{example}
    Consider the case $n=1$. What do the framed and rectilinear embeddings look like in this case?
    Well $\Diskf(\coprod_I\R^1,\R^1)\simeq \Conf_I(\R^1)$ is discrete up to
    homotopy, and thus identified noncanonically with the symmetric group on $I$ letters.
\end{example}

Recall a definition from the first day.
\begin{definition}
    An $\mathcal{E}_n$ algebra in $\mathcal{V}$ is a symmetric monoidal functor
    $\Diskr \to \mathcal{V}^\otimes$.
\end{definition}
Next time we will see that $\mathcal{E}_1$-algebras are, in a suitable sense,
equivalent to associative algebras.

\newpage

\section{Examples of $n$-disk algebras [09/29/2017]}

Notice that we have a functor $\Diskf\to \Disk$. In particular, the former
category has \textit{less} structure than the latter.
\marginnote{Why is this?}

Let's recall the following way of thinking about a commutative algebra.
\begin{definition}
    A commutative algebra in $\mathcal{V}^\otimes$ (a symmetric monoidal category) is
    a symmetric monoidal functor
    \begin{equation*}
        \begin{tikzcd}
            (\mathsf{Fin},\coprod) \rar{A} & (\mathcal{V},\otimes),
        \end{tikzcd}
    \end{equation*}
    where $\mathsf{Fin}$ is the category of finite sets.
\end{definition}

This probably looks a little unfamiliar, so let's unpack it. Observe that the
underlying object is $A=A(*)$. The unit morphism is
$A(\varnothing)=1_{\mathcal{V}}\to A(*)$. Here $1_{\mathcal{V}}$ is the symmetric monoidal unit in $\mathcal{V}$.
The multiplicative structure comes from the map from the two-point set to the one-point
set, and the commutativity follows from the fact that this map is $\Sigma_2$-invariant
and that $A$ is a \textit{symmetric} monoidal functor so that $A^{\otimes 2}\to A$ is
$\Sigma_2$-invariant as well.


\begin{definition}
    For $\mathcal{V}$ a symmetric monoidal topological category, an \textbf{$n$-disk algebra}
    is a symmetric monoidal functor $\Disk\to \mathcal{V}$. Similarly a \textbf{framed $n$-disk algebra}
    is a symmetric monoidal functor $\Diskf\to\mathcal{V}$ and a \textbf{$\mathcal{E}_n$-algebra}
    is a symmetric monoidal functor $\Diskr\to\mathcal{V}$.
\end{definition}

Today we will discuss examples of $n$-disk algebras for $\mathcal{V}$ being chain
complexes and toplogical spaces.
\begin{enumerate}
    \item There are the trivial $n$-disk algebras. For instance, consider $A=\Z$, which 
        sends
        \begin{equation*}
            \begin{tikzcd}
                \coprod_I \R^n \rar & \Z^{\otimes I}\cong \Z
            \end{tikzcd}
        \end{equation*}
        and any embedding
        \begin{equation*}
            \begin{tikzcd}
                \coprod_I \R^n \hookrightarrow \coprod_J \R^n \rar & \Z \xrightarrow{\id}\Z.
            \end{tikzcd}
        \end{equation*}
        We can all agree that this is pretty trivial. More generally, we might take $A=\Z\oplus B$,
        which sends $\coprod_I\R^n$ to $(\Z\oplus B)^{\otimes I}$ and sends $\coprod_I\R^n\hookrightarrow\R^n$
        to a map $(\Z\oplus B)^{\otimes I}\to \Z\otimes B$. What is this map? Let's start by looking at
        the case where $|I|=2$. In that case take the map
        \begin{equation*}
            \Z\oplus \Z\otimes B\oplus B\otimes\Z \oplus B\otimes B \xrightarrow{\id_\Z\oplus\id_B\oplus\id_B\oplus 0} \Z\oplus B.
        \end{equation*}
        You can generalize this for larger $I$ -- just take the product on the $B$ factors to be zero.
        \marginnote{This map looks weird. Fix it.}

    \item Now let $A:(\mathsf{Fin},\coprod) \to(\mathsf{Ch},\otimes)$ be a commutative dg algebra.
        There is a natural symmetric monoidal functor $\pi_0:(\Disk,\coprod)\to (\mathsf{Fin},\coprod)$
        which sends
        $\coprod_I\R^n\mapsto\pi_0(\coprod_I\R^n)=I$. The composition of these maps gives us
        an $n$-disk algebra. The idea here is that in an $n$-disk algebra there is not just
        one way of multiplying things. Indeed, there are $\Emb(\coprod_2\R^n,\R^n)$ multplications.
        What we have just done is used the $\pi_0$ functor to reduce these various multiplications
        into the unique multiplication coming from the unique map from the two-point set to the
        one-point set.

    \item The next example is that of an $n$-fold loop space of a pointed space $(Z,*)$.
        We will construct a functor $\Disk\to\mathsf{Top}$ and then postcompose with $C_*$ to obtain a chain complex.
        This first functor is $\Omega^nZ:\Disk\to\mathsf{Top}$, which we will now define.
        Recall that for $M$ a space and $Z$ a pointed space, we say that a map $M\to Z$ is \textbf{compactly
        supported} if there exists $K\subset M$ with $K$ compact and such that $g|_{M\setminus K}=*\in Z$.
        Then we define
        \begin{equation*}
            \Omega^nZ := \Maps_c( -, Z): (\Disk,\coprod)\to(\mathsf{Top},\times).
        \end{equation*}
        If you haven't thought much about compactly supported maps then there is something you have to check.
        Observe that if 
        \begin{equation*}
            \begin{tikzcd}
                U \rar{g}\dar & Z \\
                V  \ar[ru,dashed] & \;
            \end{tikzcd}
        \end{equation*}
        the map $U\hookrightarrow V$ is an open embedding then the map $\bar g$, given by sending
        a point $v$ to $g(v)$ for $v\in U$ and $*$ otherwise, is continuous (\textbf{homework 3}).
        Hence $\Maps_c$ is covariant via this extension by zero procedure. Moreover it is
        symmetric monoidal as it sends disjoint unions to products.

        Why is this called the $n$-fold loop space? Well notice that
        \begin{align*}
            \Omega^nZ &= \Maps( (D^n,\partial D^n), (Z,*)) \\
            &\simeq \Maps_c(\R^n,Z)
        \end{align*}
        where we identify $\R^n$ with the interior of the closed disk $D^n$.
        % TODO distinguish between open and closed disks
        In total, we get
        \begin{equation*}
            \Disk \xrightarrow{\Maps_c(-,Z)} \mathsf{Top} \xrightarrow{C_*} \mathsf{Ch}
        \end{equation*}
        whose composite we write $C_*\Omega^nZ$.
        \marginnote{What happens if we don't use compactly supported and take values in
        cochains? What is this $n$-disk algebra in terms of things we know?}

    \item At the opposite end of the spectrum from trivial algebras are free algebras.
        The \textbf{free $\mathcal{E}_n$ algebra} on $V\in (\mathsf{Ch},\otimes)$,
        which we'll notate as
        \begin{equation*}
            \mathcal{F}_{\mathcal{E}}(V):\Diskr\to\mathsf{Ch},
        \end{equation*}
        sends
        \begin{equation*}
            \R^n \mapsto \bigoplus_{k\geq 0}C_*\left( \Emb^\text{rect}(\coprod_kD^n,D^n) \right)\otimes_{\Sigma_k}V^{\otimes k}.
        \end{equation*}
        Here the $\Sigma_k$ denotes the diagonal quotient. We will define what it does
        on morphisms in a moment.

        This has the universal property that given any map of chain complexes $V\to A$
        for $A$ an $\mathcal{E}_n$-algebra (by this we mean a map of chain complexes
        $V\to A(\R^n)$), there exists a unique map of $\mathcal{E}_n$-algebras such that the diagram
        \begin{equation*}
            \begin{tikzcd}
                V \rar{\mu}\dar & A \\
                \mathcal{F}_{\mathcal{E}_n}(V) \ar[ur,dashed]
            \end{tikzcd}
        \end{equation*}
        commutes. The vertical map $V\to \mathcal{F}_{\mathcal{E}_n}$ is given by the
        inclusion into the $k=1$ summand which is just $V$.
        % TODO change R^n to D^n
        
        What is this dashed map? For each $k$ we need a map
        \begin{equation*}
            C_*\left( \Emb^\text{rect}(\coprod_k D^n,D^n) \right)\otimes_{\Sigma_k} V^{\otimes k} \to A(\R^n).
        \end{equation*}
        To do this we use the map
        \begin{equation*}
            C_*\left( \Emb^\text{rect}(\coprod_k D^n,D^n) \right)\otimes_{\Sigma_k} V^{\otimes k}
            \xrightarrow{\mu^{\otimes k}} C_*\left( \Emb^\text{rect}(\coprod_kD^n,D^n) \right)\otimes_{\Sigma_k}A^{\otimes k}
        \end{equation*}
        and then use the multiplication for $A$. Let's explain this. Notice that $A:\Diskr\to\mathsf{Ch}$
        and we have $\Emb^{rect}(\coprod_k D^n,D^n)\to \Maps_\mathsf{Ch}(A^{\otimes k}(D^n), A(D^n))$ which by
        Dold-Kan (recall that everything is enriched in $\mathsf{Top}$) corresponds to a map
        \begin{equation*}
            C_*\left( \Emb^\text{rect}(\coprod_k D^n,D^n) \right)\to \underline{\Hom}_\mathsf{Ch}(A^{\otimes k}(D^n),A(D^n))
        \end{equation*}
        that is $\Sigma_k$-equivariant. Because of the equivariance it factors to the quotient, which
        gives us the multiplication map. 
        Now apply (equivariant) tensor-hom adjunction to obtain this multiplication map.
        Okay, but we haven't yet shown that the free thing is actually
        an $\mathcal{E}_n$-algebra, but we're out of time.
    \item The last example we were gonna talk about is pretty awesome. Too bad we're out of time.
\end{enumerate}

Notice that if $Z$ was an Eilenberg-MacLane space, there is overlap between examples 2 and 3.

\newpage

\section{Examples, continued [10/02/2017]}

Last lecture we ran out of time in the proof of the following result.
\begin{proposition}
    The functor $\mathcal{F}_{\mathcal{E}_n}(V)$ sending 
    \begin{equation*}
        D^n \mapsto \bigoplus_{k\geqslant 0}C_*\left( \Emb^\text{rect}(\coprod_kD^n,D^n) \right)\otimes_{\Sigma_k}V^{\otimes k}
    \end{equation*}
    is the free $\mathcal{E}_n$-algebra on $V\in\mathsf{Ch}$.
\end{proposition}
\begin{proof}
    Last time we showed that this functor satisfied the correct universal property though
    we hadn't yet specified what it did on morphisms. To define what it does to morphisms
    we need to construct a map
    \begin{equation*}
        \Emb^\text{rect}(\coprod_I D^n, D^n)\to \Maps_\mathsf{Ch}(\mathcal{F}_{\mathcal{E}_n}(V)^{\otimes I}, \mathcal{F}_{\mathcal{E}_n}(V)).
    \end{equation*}
    By the Dold-Kan correspondence this is equivalent to specifying a map
    \begin{equation*}
        C_*(\Emb^\text{rect}(\coprod_I D^n, D^n)) \to \underline{Hom}(\mathcal{F}_{\mathcal{E}_n}(V)^{\otimes I}, \mathcal{F}_{\mathcal{E}_n}(V))
    \end{equation*}
    which by the tensor-(internal)hom adjunction, is equivalent to the data of a map
    \begin{equation*}
        C_*(\Emb^\text{rect}(\coprod_I D^n, D^n)) \otimes \mathcal{F}_{\mathcal{E}_n} \to \mathcal{F}_{\mathcal{E}_n}(V),
    \end{equation*}
    in other words, a map
    \begin{equation*}
        C_*(\Emb^\text{rect}(\coprod_I D^n, D^n)) \otimes \left( \bigoplus_{k\geqslant 0}C_*(\Emb(\coprod_k D^n,D^n))\otimes_{\Sigma_k}V^{\otimes k} \right)^{\otimes I} \to \mathcal{F}_{\mathcal{E}_n}(V).
    \end{equation*}
    Let's maybe just look at the left hand side in the case where $I\cong\{0,1\}$:
    \begin{align*}
        C_*(\Emb^\text{rect}(\coprod_2 D^n, D^n)\otimes \bigoplus_{k_0,k_1}\left( C_*(\Emb^\text{rect}(\coprod_{k_0}D^n, D^n))\otimes_{\Sigma_{k_0}}V^{\otimes k_0}
        \otimes C_*(\Emb^\text{rect}(\coprod_{k_1}D^n, D^n))\otimes_{\Sigma_{k_1}} V^{\otimes k_1}\right) \\
        = \bigoplus_{k_0,k_1\geq 0} C_*\left( \Emb^\text{rect}(\coprod_2D^n,D^n)\times \Emb^\text{rect}(\coprod_{k_0}D^n,D^n)\times \Emb^\text{rect}(\coprod_{k_1}D^n,D^n) \right)\otimes_{\Sigma_{k_0}\times \Sigma_{k_1}} V^{\otimes(k_0+k_1)}
    \end{align*}
    But from this last expression it is easy to see now that we have a map 
    from what's in the parentheses to
    $\Emb^\text{rect}(\coprod_{k_0+k_1} D^n, D^n)\otimes_{\Sigma_{k_0+k_1}} V^{\otimes(k_0+k_1)}$
    by composing the embeddings (up to keeping track of the symmetric group).
\end{proof}


Let's talk about the example that we didn't have time to discuss at the end of last class.
This is the class of $\mathcal{E}_n$ enveloping algebras of Lie algebras. Let $\fr g$ be
a Lie algebra. For simplicity we'll work over $\R$. \marginnote{John: this works for Lie
algebras valued in spectra too, up to some changes.}

We define a functor $\Disk\to \mathsf{Alg}_\mathsf{Lie}(\mathsf{Ch}_\R)$ which sends
$U\mapsto \Omega^*_c(U,\fr g)$, i.e. a Euclidean space to its space of compactly supported
de Rham forms. Notice that this construction sends disjoint unions to direct sums.
We now postcompose with the Chevalley complex $C_*^\mathsf{Lie}$ (or if you like
$C_*^\mathsf{Lie}(\fr g)\simeq \R\otimes_{\mathcal{U}\fr g}^\mathbb{L}\R$).
We will write this composite functor as $C_*^\mathsf{Lie}(\Omega_c^*(\bullet, \fr g))$,
and it sends disjoint unions to tensor products.
\begin{equation*}
    \begin{tikzcd}
        \Disk \rar & \mathsf{Alg}_\mathsf{Lie}(\mathsf{Ch}_\R) \rar & \mathsf{Ch}_\R
    \end{tikzcd}
\end{equation*}

We will use the fact that
\begin{equation*}
    C_*^\mathsf{Lie}(\fr g\oplus \fr g') \simeq C_*^\mathsf{Lie}(\fr g)\oplus C_*^\mathsf{Lie}(\fr g').
\end{equation*}
We claim that for $n=1$,
\begin{equation*}
    C_*^\mathsf{Lie}(\Omega_c^*(\R^1,\fr g)) \simeq \mathcal{U}\fr g.
\end{equation*}
In particular this functor which maps Lie algebras to $\mathcal{E}_n$-algebras is
left-adjoint to the forgetful functor $\mathsf{Alg}_{\mathcal{E}_n}\to \mathsf{Alg}_\mathsf{Lie}$.

Here's a small aside. Where is this Lie algebra structure coming from? Well notice
that we have a map
\begin{equation*}
    C_*(\Emb^\text{rect}(\coprod_2 D^n,D^n))\otimes A^{\otimes 2}\to A.
\end{equation*}
But notice that the left-hand side is homotopic to $C_*(S^{n-1})$ (do this exercise!).
At the level of homology, this gives a map $\HH_*S^{n-1}\otimes_\R (\HH_*A)^{\otimes 2}\to \HH_*A$.
There are two generators for the homology of $S^{n-1}$ and so we a degree 0 map
\begin{equation*}
    \HH_*A\otimes\HH_*A \to \HH_*A,
\end{equation*}
which is the associative algebra structure. However, we have another map coming from
the fundamental class of $S^{n-1}$,
\begin{equation*}
    (\HH_*A \otimes \HH_*A)[n-1] \to \HH_*A,
\end{equation*}
is a Lie algebra structure on $\HH_*A[1-n]$. (Everything here should be valued in $\mathsf{Ch}$)
A reference for this forgetful functor is a paper by F. Cohen.

Since we're almost out of time, let me give you a hint of what we'll be doing next.
In factorization homology we are given some functor $A:\Disk\to\mathsf{Ch}$ (or
into $\mathsf{Top}).$ Factorization homology is an extension
\begin{equation*}
    \int_M A = \text{hocolim } ( {\Disk}_{/M}\xrightarrow{A} \mathsf{Ch})
\end{equation*}
an extension that fits into
\begin{equation*}
    \begin{tikzcd}
        {\Disk}_{/M} \rar{A} \dar & \mathsf{Ch} \\
        \mathsf{Mfld}_n \ar[ur,dashed] &
    \end{tikzcd}
\end{equation*}

We need to define not only the homotopy colimit but also what we mean by ${\Disk}_{/M}$.
What do we want it to be? Its mapping spaces should fit into the homotopy
pullback diagram
\begin{equation*}
    \begin{tikzcd}
        \Maps_{ {\Disk}_{/M}}(U,V) \rar\dar & \Emb(U,V)\dar{V\hookrightarrow M} \\
        * \rar{U\hookrightarrow M} & \Emb(U,M)
    \end{tikzcd}
\end{equation*}
As usual, if we require this to be a pullback instead of a homotopy pullback this
space will be too small. In fact, it will be empty.
Okay, you say -- so let's just define a category of $n$-disks with these mapping spaces.
The problem that you will run into here is that the composition will be associative only up to homotopy
due to the composition of the paths in $\Emb(U,M)$ required by the adjective ``homotopy''.
So we'll have to dip our toes into the theory of infinity-categories, which neatly
deals with both this issues and homotopy colimits.

\newpage

\section{Homotopy colimits [10/04/2017]}

We are interested in proving the following result.
\begin{theorem}
    The homotopy colimit is homotopy invariant. More precisely, given two functors $F,G: \mathcal{C}\to\mathsf{Top}$
    and any natural transformation $\alpha:F\implies G$ such that for all $c\in\mathcal{C}$,
    $\alpha(c):F(c)\to G(c)$ is a homotopy equivalence, then
    \begin{equation*}
        \hocolim_{\mathcal{C}} F \simeq \hocolim_{\mathcal{C}} G
    \end{equation*}
    is a homotopy equivalence.
\end{theorem}
Notice that we can replace homotopy equivalence everywhere with weak homotopy equivalence.
Actually we will sketch the proof. The details will be left as \textbf{homework 4.}
There is a problem in the usual theory of colimits: they are not homotopy invariant.
Consider the following simple example. We have a map of spans
\begin{equation*}
    \begin{tikzcd}
        D^n\dar & S^{n-1}\lar\dar\rar & D^n\dar \\
        * & S^{n-1}\lar\rar & *
    \end{tikzcd}
\end{equation*}
where the vertical arrows are homotopy equivalences. But the colimits of
the top and bottom rows are $S^n$ and $*$ respectively, which are of course not
homotopy equivalent.

We have two basic tools that we will use to fix this: Mayer-Vietoris and Seifert-van Kampen.
\begin{lemma}
    Mapping cones are homotopy invariant. More precisely, if we have a commutative diagram
    \begin{equation*}
        \begin{tikzcd}
            X \rar{f}\dar{\sim} & Y\dar{\sim}\\
            X' \rar{f'} & Y'
        \end{tikzcd}
    \end{equation*}
    where the vertical arrows are homotopy equivalences then there is an
    induced homotopy equivalence on cones, $\cone f\simeq \cone f'$.
\end{lemma}
\begin{proof}
    Recall that the cone is written as the colimit
    \begin{equation*}
        \cone f = *\sqcup_{X\times\{0\}}X\times[0,1]\sqcup_{X\times\{1\}}Y.
    \end{equation*}
    Notice that we have maps $\cyl f \to \cyl f'$ inducing an $H_*$-isomorphism
    by Mayer-Vietoris applied to the obvious cover. It remains to argue about the
    fundamental group. Applying the Seifert-van Kampen (for fundamental groupoids)
    to this cover shows that the fundamental groupoids are equivalent. We conclude
    that $\cyl f \simeq \cyl f'$.
    \marginnote{John: the most important thing you should take away from a point-set
        topology course is that a closed embedding of compact Hausdorff spaces is a
        cofibration.}
\end{proof}
Likewise for the homotopy pushout. Given $Y \xleftarrow{}X\xrightarrow{} Z$ the
homotopy pushout is $Y\sqcup_{X\times 0}X\times[0,1]\sqcup_{X\times 1}Z$. This is
homotopy invariant as well, which is proved in an identical fashion.

Recall that $\Delta$ is the category of finite nonempty ordered sets with
nondecreasing functions between them.
\begin{definition}
    A \textbf{simplicial space} is a functor $X_\bullet:\Delta^\text{op}\to \mathsf{Top}$.
    The \textbf{geometric realization} $|X_\bullet|$ is the colimit
    \begin{equation*}
        \begin{tikzcd}
            \;|X_\bullet|& \coprod_{n\geq 0}X_n\times \Delta^n\lar & \coprod_{[m]\to[l]}X_l\times \Delta^m \ar[l, shift left]\ar[l, shift right] % draw in the two arrows here
        \end{tikzcd}
    \end{equation*}
\end{definition}
The basic principle is that the ``generators'' are given by coproducts and the ``relations''
are given by reflexive coequalizers. For homotopy colimits the generators will still be
coproducts, but the relations will be handled by the geometric realization.

\begin{definition}
    For $X_\bullet$ a simplicial space, the \textbf{$n$th latching object} $L_nX_\bullet$ is
    \begin{equation}
        L_nX_\bullet = \colim_{(\Delta^\text{op}_{<n})_{/[n]}} X_m \subset X_n
    \end{equation}
    The index category is the category of maps $[n]\to [m]$ for $m<n$. \marginnote{Think of
    this as all the degenerate simplices induced from everything below $n$.}

    We say that $X$ is \textbf{Reedy cofibrant} if the map $L_nX\bullet\to X_n$
    is a cofibration for all $n$.
\end{definition}

\begin{lemma}
    If we have a map of simplicial spaces $X_\bullet\to Y_\bullet$ such that both $X$
    and $Y$ are Reedy cofibrant with the induced maps $X_n\simeq Y_n$ homotopy equivalences
    then $|X_\bullet|\simeq |Y_\bullet|$.
\end{lemma}
\begin{proof}[Proof outline]
    We proceed by induction on skeleta. In particular we have the geometric realization
    of the $n$-skeleton
    \begin{equation*}
        \begin{tikzcd}
            \;|\sk_n X_\bullet | & \coprod_{k\leqslant n}X_k\times \Delta^k\lar & \coprod_{[m]\to[l]; m,l\leqslant n}X_l\times \Delta^m\ar[l,shift left]\ar[l, shift right]
        \end{tikzcd}
    \end{equation*}
    These skeleta sit inside the total geometric realization as closed embeddings whence
    $|X_\bullet| = \lim |\sk_n X_\bullet|$. So we will prove $|X_\bullet|\simeq |Y_\bullet|$
    by proving that $|\sk_n X_\bullet|\simeq|\sk_n Y_\bullet$. The base case just says that
    $\sk_0X_\bullet X_0\simeq Y_0 = \sk_0 Y_0$. For the inductive step check that
    there is a pushout
    \begin{equation*}
        \begin{tikzcd}
            L_nX\times \Delta^n\coprod_{L_n X\times\partial \Delta^n} X_n\times\partial\Delta^n \rar\dar & \sk_{n-1} X_\bullet|\dar \\
            X_n\times\Delta^n \rar & \sk_n X_\bullet|
        \end{tikzcd}
    \end{equation*}
    Likewise for $Y$. By the inductive hypothesis we know that the map from the
    top right of the diagram for $X$ to the top right of the diagram for $Y$ is a homotopy
    equivalence. By assumption the same is true for the bottom left corner. Similarly
    one has to prove that the top left is a homotopy equivalence. It is then important that
    the top and left arrows are cofibrations to conclude that the $n$-skeleton of $X$
    is homotopy equivalent to the $n$-skeleton of $Y$.
\end{proof}
Write out the details of this proof as homework 4.

Let's now turn to homotopy colimits. Given $\mathcal{C}$ a category we have a simplicial
object $N\mathcal{C}_*:\Delta^\text{op}\to\mathsf{Set}$, the nerve of $\mathcal{C}$.
Observe that the ordinary colimit always receives a surjective map from the coproduct
of the functor applied to all the objects in the indexing category. In particular the
colimit will always be this coproduct quotiented by a relation coming from morphisms
in $\mathcal{C}$.
For homotopy colimits we will get a map $F:N\mathcal{C}\to \mathsf{Top}$ sending
$[p]\mapsto\sqcup_{N\mathcal{C}_p}F$ and $\hocolim_{\mathcal{C}} F = |F_\bullet|$.

\newpage

\section{Homotopy colimits, continued [10/06/2017]}

\subsection{Homotopy colimits}

Recall that if we have an ordinary functor $F:\mathcal{C}\to \mathsf{Top}$ then
the colimit $\colim_\mathcal{C} F$ can be expressed as a coequalizer: a quotient
of the coproduct of $F(c)$ for all $c\in \mathcal{C}$ by the maps in $\mathcal{C}$
(every colimit is a reflexive coequalizer of coproducts).

\begin{definition}
    Given $F:\mathcal{C}\to \mathsf{Top}$ we write $F_\bullet:\Delta^\text{op} \to \mathsf{Top}$
    for the functor sending $[n]\mapsto \coprod_{N\mathcal{C}_n} F(c_0)$ (where $c_0$ is the
    first object in the simplex). The simplicial structure maps are given by copmosition and
    identities as usual. Then we define the \textbf{Bousfield-Kan} homotopy colimit
    \begin{equation*}
        \hocolim_{\mathcal{C}} F := |F_\bullet|
    \end{equation*}
\end{definition}

Notice that every homotopy colimit is a geometric realization of coproducts.
\begin{theorem}[Homotopy invariance of $\hocolim$]
    Suppose we have two functors $F,G:\mathcal{C}\to\mathsf{Top}$ such that $F(c)$ and $G(c)$
    are cofibrant (i.e. CW complexes) for all $c\in\mathcal{C}$, and there is a
    natural transformation $\alpha$ such that $\alpha(c)$ is a homotopy equivalence.
    Then $\hocolim_\mathcal{C}F\simeq \hocolim_{\mathcal{C}}G$.
\end{theorem}
\begin{proof}
    This is homework 4 (from last time). Recall that the lemma from last time tells us
    that given a map of Reedy cofibrant simplicial spaces $X_\bullet\to Y_\bullet$ inducing
    equivalences on $n$-simplices for every $n$, the geometric realizations are equivalent.
    Hence we need only check Reedy cofibrancy for $F_\bullet$ and $G_\bullet$.

    In this case the $n$th latching object of $F_\bullet$ is
    \begin{equation*}
        L_n F_\bullet = \coprod F(c_0)
    \end{equation*}
    where the coproduct is taken over all degenerate $n$-simplices of $N\mathcal{C}$.
    But by the CW complex assumption above the maps $L_n F_\bullet\hookrightarrow F_\bullet$
    is a cofibration, as desired.
\end{proof}

\subsection{Factorization homology---a predefinition}

\begin{definition}
    We define ${\disk}_{/M}$ to be the category of $n$-disks embedding in $M$ with
    morphisms given by inclusion (it is equivalent to the subposet of opens on $M$
    such that the image is diffeomorphic to an $n$-disk).
\end{definition}

We can make the following predefinition (easier to make, harder to work with). Given
$A:\disk\to\mathsf{Top}$ we define the factorization homology 
\begin{equation*}
    \int_M A := \hocolim_{ {\disk}_{/M} } A.
\end{equation*}
Really we should be working with the topological version ${\Disk}_{/M}$ but it
will end up being homotopy equivalent.

We want factorization homology $\int_M A$ to be $M$, where we replace $\R^n$
with $A(\R^n)$.
\begin{example}[Desiderata]
    \mbox{}
    \begin{enumerate}
        \item if $A=*$? Then we would like $\int_M* \simeq *$.
        \item if $A(\coprod_I\R^n)=\coprod_I\R^n$ then $\int_M \id \simeq M.$
        \item be able to compute $\int_M A$ for $A$ belonging to the examples
            we discussed earlier. For instance, commutative algebras, $n$-fold
            loop spaces, free $n$-disk algebras, trivial $n$-disk algebras,
            and enveloping algebra of a Lie algebra.
        \item if $A$ lands in $\mathsf{Ch}$ sending $\coprod_I\R^n\mapsto A^{\oplus I}$
            then $\int_M A \simeq C_*(M,A)$ (and likewise for spectra).
    \end{enumerate}
\end{example}

We need tools for computing homotopy colimits. For instance, it is useful to
introduce the topological version,
\begin{equation*}
    {\disk}_{/M} \to {\Disk}_{/M},
\end{equation*}
and it turns out that homotopy colimits over these two categories are equivalent.
To make statements like this, we need crieria for when two homotopy colimits are
equivalent when they're indexed by different categories.

Since we don't have time left today to introduce $\infty$-categories, let's go over some
properties of $\hocolim$.
\begin{theorem}[Quillen's theorem A]
    Let $g:\mathcal{C}\to \mathcal{D}$ is a functor. If $F$ is some functor from $\mathcal{D}$
    to some target (such as topological spaces). Then
    \begin{equation*}
        \hocolim_{\mathcal{C}}F \simeq \hocolim_{\mathcal{D}} F
    \end{equation*}
    if and only if $g$ is \textbf{final}. In other words, for $d\in\mathcal{D}$,
    define $\mathcal{C}^{d/}:=\mathcal{C}\times_{\mathcal{D}}\mathcal{D}^{d/}$,
    and say that $g$ is final if $B(\mathcal{C}^{d/})\simeq *$ where $B\mathcal{C}:=\hocolim *$.
\end{theorem}

There is another key property of homotopy colimits involving hypercovers. Suppose
we have a functor $\mathcal{C}\to\text{Opens}(X)\hookrightarrow\mathsf{Top}$. When is
\begin{equation*}
    \hocolim_{\mathcal{C}}F\simeq X?
\end{equation*}
Define, for $x\in X$, $\mathcal{C}_x$ to be the full subcategory of objects $c$ such that $x\in F(c)$.
If $B\mathcal{C}_x\simeq *$ for each $x\in X$ then $\hocolim_{\mathcal{C}} F\simeq X$.

\begin{exercise}
    $\hocolim_* F=F(*)$.
\end{exercise}

\newpage

\section{$\infty$-categories [10/09/2017]}

\subsection{Topological enrichment}

Suppose we have a category $\mathcal{T}$ with products as well as a functor $\Delta\to\mathcal{T}$
from the ordinal category.  Then $\Maps_{\mathcal{T}}(s,t)$ is a simplicial set with
\begin{equation*}
    \Maps_\mathcal{T}(s,t)_p = \Hom_\mathcal{T}(s\times [p], t),
\end{equation*}
where by $[p]$ we denote the image of the functor. If we now apply geometric realization,
we obtain mapping spaces.

Consider for example $\mathcal{T}=\mathsf{Top}$ (as a non-enriched, ordinary category).
There is a functor $\Delta\to\mathsf{Top}$ which sends $[p]$ to the geometric $p$-simplex.
Then we get a simplicial set $\Maps_\mathsf{Top}(X,Y)_\bullet$, and notice that
\begin{equation*}
    \Maps_\mathsf{Top}(X\times\Delta^p, Y) \cong \Maps_\mathsf{Top}(\Delta^p, \Maps_\mathsf{Top}(X,Y))
\end{equation*}
where we equip the set $\Maps_\mathsf{Top}(X,Y)$ with the compact-open topology, as usual.
Hence the simplicial set $\Maps_\mathsf{Top}(X,Y)_\bullet$ is isomorphic to the singular
simplicial set $\Sing\Maps_\mathsf{Top}(X,Y)$. If we apply the geometric realization,
since $|\Sing A|\simeq A$, we see that we obtain the usual topological enrichment (at least
up to homotopy) on the category $\mathsf{Top}$.


This trick allows us to enrich various categories in $\mathsf{Top}$. As we have seen above
the category of topological spaces is an immediate example, and it is not hard to do
similarly for the category of simplicial sets. Another two familiar examples are
those of chain complexes and natural transformations of functors. For a slightly
unfamiliar example one could use the functor $\Delta\to \mathsf{CAlg}_\R^\text{op}$
of de Rham forms on simplices, which sends $[p]\mapsto\Omega^*(\Delta^p)$, to give
the (opposite) category of commutative $\R$-algebras a topological enrichment.

This leads us to the following general idea, which highlights the importance of
topological enrichment.
\begin{quote}
    \textbf{Principle:} Everywhere where there is a notion of homotopy, there exists
    an enrichment in $\mathsf{Top}$ such that this is an actual homotopy.
\end{quote}

\subsection{Complete Segal spaces and quasicategories}

Now, whatever $\infty$-categories are, they should have two properties:
\begin{enumerate}
    \item The collection of $\infty$-categories up to some notion of equivalence
        should be equal to the collection of topological categories modulo
        homotopy equivalence (see below for the formal definition).
    \item Colimits, limits, functor categories, over/undercategories in
        $\infty$-categories are homotopy colimits, homotopy limits, etc. in
        the corresponding topological category.
\end{enumerate}

\begin{definition}
    Let $F:\mathcal{C}\to \mathcal{D}$ be a functor between topological categories.
    We say that $F$ is a \textbf{homotopy equivalence} if for each $c,c'\in \mathcal{C}$,
    $\Maps_\mathcal{C}(c,c') \simeq \Maps_\mathcal{D}(Fc,Fc')$ and every object $d\in\mathcal{D}$
    is homotopy equivalent to some $F(c)$ for $c\in\mathcal{C}$. In other words, there exists a map
    $d\to Fc$ such that $\Maps_\mathcal{D}(e, d)\to \Maps(e,Fc)$ is a homotopy equivalence
    for all $e\in\mathcal{D}$.
\end{definition}

So that's roughly the philosophy of $\infty$-categories. They are a nice ground to work
on when dealing with homotopy invariance. When it comes to actually defining $\infty$-categories,
there is a conceptual option and a more economical option: complete Segal spaces and quasicategories,
respectively. Let me tell you briefly about complete Segal spaces.

When we are given $\mathcal{C}$ a category, there is a set of objects and a set of morphisms.
However, the only way we ever use categories is up to equivalence, and these underlying sets have
no invariance properties with respect to equivalence of categories (for instance the sets of objects
or corresponding sets of morphisms need not have the same number of elements).
This leads us to the question: how can we think of a category in a way that better reflects 
the homotopy theory (i.e. equivalences) of categories.

It turns out that we can construct \textit{spaces} of objects and morphisms of $\mathcal{C}$ in the following way.
Consider the underlying groupoid $\mathcal{C}^0\subset \mathcal{C}$ where
we have thrown out all the noninvertible maps. Taking the nerve (classifying space) $N\mathcal{C}^0$
gives us a simplicial set. The associated space is of course the geometric realization $|N\mathcal{C}^0|$. 
For morphisms, consider the category $\Fun^\text{iso}([1], \mathcal{C})$ of functors $[1]\to\mathcal{C}$
with natural transformations through isomorphisms. This category is a also a groupoid, so we obtain
a space $|N\Fun^\text{iso}([1],\mathcal{C})|$.

Observe now that if we have two equivalent categories $\mathcal{C}\simeq \mathcal{C}'$ then
the spaces of objects and morphisms that we have defined above will be homotopy equivalent.
Generalizing these constructions for higher $[p]$ we obtain a fully faithful functor
\begin{equation*}
    C_\bullet:\mathsf{Cat}\hookrightarrow \Fun(\Delta^\text{op},\mathsf{Top})
\end{equation*}
sending a category $\mathcal{C}$ to the simplicial space that sends $[p]\mapsto N\Fun^\text{iso}([p],\mathcal{C})$.
It moreover has the property that the diagram
\begin{equation*}
    \begin{tikzcd}
        \mathcal{C}_\bullet[2] \rar\dar & \mathcal{C}_\bullet\{1<2\}\dar \\
        \mathcal{C}_\bullet\{0<1\} \rar & \mathcal{C}_\bullet\{1\}
    \end{tikzcd}
\end{equation*}
is actually a homotopy pullback square (this turns out to more or less characterizes the
image of $C_\bullet$). In particular, one should suspect (correctly) that colimits
and limits will be mapped to homotopy colimits and homotopy limits.
Unfortunately, going down this path to $\infty$-categories quickly turns into messing around with
bisimplicial sets, which starts to get a bit complicated.

This leads us to the more economical option of quasicategories. For quasicategories
there is only one simplicial index involved and there is the important advantage
that there are thousands of pages of reference material.
\begin{definition}
    A \textbf{quasicategory} $\mathcal{C}$ is a simplicial set such that every
    inner horn (for $n\geq 2$) has a filler.
\end{definition}
Let's explain these terms. Write $\Delta[n]$ for the geometric $n$-simplex (the
functor $\Delta^\text{op}\to \mathsf{Set}$ given $\Delta[n]=\Hom_\Delta(-,[n])$).
There are a number of maps $\Delta[n-1]\to \Delta[n]$ induced by maps
$[n-1]\to[n]$ that skipping some $i$.
Then the $i$th horn of the geometric $n$-simplex is defined to be
\begin{equation*}
    \Lambda_i[n]=\bigcup\Delta[n-1]
\end{equation*}
where the union is over all faces $\Delta[n-1]\hookrightarrow\Delta[n]$ except for the
$i$th. For instance there are three horns of the 2-simplex.
An inner horn is a horn where the missing face is neither the $0$th face or the
$n$th face (so the 2-simplex has only one inner horn, $\Lambda_1[2]$).
Now we can define what it means for a simplicial set $\mathcal{C}$ to have
inner horn fillings. It means that for every map $\Lambda_i[n]\to\mathcal{C}$
there is a lift, or ``filling'',
\begin{equation*}
    \begin{tikzcd}
        \Lambda_i[n] \ar[r]\ar[d,hook] & \mathcal{C} \\
        \Delta[n]\ar[ur, dashed]
    \end{tikzcd}
\end{equation*}
of the map to the simplex making the diagram commute.

\begin{example}
    Spaces and categories are two natural sources of quasicategories.
    \begin{enumerate}
        \item Consider $\mathcal{C}=\text{Sing}(X)$. By the adjunction between geometric
            realization and $\Sing$ the data of a map $\Lambda_i[n]\to \Sing X$ is precisely
            the data of a map $|\Lambda_i[n]|\to X$. Now one can choose (there is no unique
            choice) say a retraction $|\Delta[n]|\to |\Lambda_i[n]|$. Composing with the map
            to $X$ and again applying adjointness, we obtain a map $\Delta[n]\to \Sing X$
            making the relevant diagram commute. We conclude that the singular simplicial
            set of a space is a quasicategory.
        \item Given a category $C$ consider the nerve $\mathcal{C}=NC$. By the Yoneda lemma
            a map $\Lambda_1[2]\to NC$ is precisely the data of a composable pair of
            morphisms in $C$. In particular there is a unique way of filling the
            horn into the simplex by using the composition of these two maps. A similar
            argument holds for higher-dimensional horns. We conclude that the nerve of any
            category is a quasicategory.
    \end{enumerate}
\end{example}

What we will do next is give the definitions of colimits, limits, functor categories,
and over/undercategories in quasicategories. We will also discuss a variant of
the nerve functor, $N:\mathsf{TopCat}\to\mathsf{QuasiCat}$, which in good cases will
send $\hocolim\mapsto\colim$.

\textbf{Grisha}: I understand your philosophy that complete Segal spaces are
more compelling than quasicategories. Is there some concrete statement that backs
this claim up?
\textbf{John}: I don't know if this is getting at your question but here's an example.
There is an inclusion $\mathsf{Cat}_\infty\subset\Fun(\Delta^\text{op},\mathsf{Top})$
so it's easy to give an internal definition of the $\infty$-category of $\infty$-categories.
However the corresponding construction is not so easy with quasicategories.

\newpage


\section{Colimits in $\infty$-categories [10/11/2017]}

\subsection{Colimits in 1-categories}

Recall the definition of a colimit of a functor $F:\mathcal{C}\to \mathcal{D}$ in the theory of ordinary categories.
We define the \textbf{right cone} $\mathcal{C}^\triangleright$ of $\mathcal{C}$ as follows.
It has objects the objects of $\mathcal{C}$ together with an object we denote $*$. For morphisms
we take
\begin{equation*}
    \Hom_{\mathcal{C}^\triangleright}(x,y) = 
    \begin{cases}
        * & y=* \\
        \varnothing & x=* \\
        \Hom_\mathcal{C}(x,y) & \text{otherwise}
    \end{cases}
\end{equation*}
Next we define the \textbf{undercategory} $\mathcal{D}^{F/}$ as the fiber
\begin{equation*}
    \begin{tikzcd}
        \mathcal{D}^{F/} \dar\rar & \Fun(\mathcal{C}^\triangleright, \mathcal{D})\dar \\
        \{F\} \rar & \Fun(\mathcal{C},\mathcal{D})
    \end{tikzcd}
\end{equation*}
It has as objects pairs $d\in\mathcal{D}$ with a natural transformation
$F\implies \underline{d}$, where $\underline{d}$ is the constant functor.
\marginnote{What are the morphisms in the undercategory?}
With these definitions we can now define colimits.
\begin{definition}
    An object $d\in\mathcal{D}$ is a \textbf{colimit} of the functor $F:\mathcal{C}\to \mathcal{D}$
    if there exists a functor $\overline F:\mathcal{C}^\triangleright\to \mathcal{D}$ 
    with $\overline F(*)\cong d$ and such that the natural restriction
    $\mathcal{D}^{\overline F/} \to \mathcal{D}^{F/}$ is an equivalence.
\end{definition}

If you're a bit confused, like Nilay is, about why this is a colimit, observe that the category
$\mathcal{C}^\triangleright$ has a final object. 
For any $\mathcal{C}'$ which has a final object, if we have a functor
$G:\mathcal{C}'\to \mathcal{D}$ then there is an equivalence
$\mathcal{D}^{G/}\cong \mathcal{D}^{G'/}$, where $G':\mathcal{C}\to \mathcal{D}$
is the restriction of $G$.

\subsection{Colimits in quasicategories}

We'd like to make a similar definition for quasicategories. We will need to
be able to define equivalence, right cones, and undercategories in that context.

\begin{definition}
    For $\mathcal{C}$ a quasicategory and any objects $x$ and $y$ (i.e. $x,y\in\mathcal{C}[0]$)
    we define the \textbf{mapping space} $\Maps_\mathcal{C}(x,y)$ as the fiber
    \begin{equation*}
        \begin{tikzcd}
            \Maps_\mathcal{C}(x,y) \dar\rar & \Maps(\Delta[1],\mathcal{C})\dar{\ev_0\times\ev_1} \\
            \{x,y\} \rar & \Maps(\Delta[0],\mathcal{C})\times\Maps(\Delta[0],\mathcal{C})
        \end{tikzcd}
    \end{equation*}
    Here $\Maps(X,Y)$ for $X$ and $Y$ simplicial sets is a simplicial set
    whose set of $n$-simplices is the set $\Hom_{\mathsf{sSet}}(X\times\Delta[n],Y)$,
    i.e. the internal hom. The mapping space is a priori just a simplicial set.
\end{definition}

Recall that Kan complexes---simplicial sets that satisfy the horn filling condition
for all horns (not just inner horns)---are the combinatorial analog of spaces.
\begin{lemma}
    As defined above, $\Maps_\mathcal{C}(x,y)$ is a Kan complex.
\end{lemma}

\begin{definition}
    If $F:\mathcal{C}\to \mathcal{D}$ is a functor between quasicategories
    (i.e. a map of simplicial sets), then $F$ is a \textbf{categorical equivalence}
    if
    \begin{enumerate}
        \item the induced map $F:h\mathcal{C}\to h\mathcal{D}$ is an equivalence
            of categories, where $h\mathcal{C}$ is the category with objects that
            of $\mathcal{C}$ and morphisms the set $\pi_0\Maps(X,Y)_n$.
        \item for any $x,y\in\mathcal{C}$ the induced map $F:\Maps_\mathcal{C}(x,y)\to\Maps_\mathcal{D}(Fx,Fy)$
            is a homotopy equivalence (equivalently a homotopy equivalence after
            geometric realization).
    \end{enumerate}
\end{definition}

Now we need the notion of the right cone of a simplicial set. Well for a hint
of what this definition should be, let's look at the nerve of the right cone construction
above:
\begin{align*}
    N(\mathcal{C}^\triangleright)_k &= \Fun([k],\mathcal{C}^\triangleright) = *\sqcup \coprod_{i=0}^k\Fun([i],\mathcal{C}) \\
    &= *\sqcup \coprod_{i=0}^k N(\mathcal{C})_i.
\end{align*}
This leads us to the following definition.
\begin{definition}
    For $S$ a simplicial set, define the \textbf{right cone} on $S$ to be
    \begin{equation*}
        S^\triangleright_k =* \sqcup  \coprod_{i\leqslant k}S_i.
    \end{equation*}
\end{definition}
One checks that this naturally forms a simplicial set.

\begin{definition}
    For $F:\mathcal{C}\to \mathcal{D}$ a functor of quasicategories, we define
    the \textbf{undercategory} $\mathcal{D}^{F/}$ to be the fiber
    \begin{equation*}
        \begin{tikzcd}
            \mathcal{D}^{F/} \rar\dar & \Fun(\mathcal{C}^\triangleright,\mathcal{D})\dar\\
            \{F\} \rar & \Fun(\mathcal{C},\mathcal{D})
        \end{tikzcd}
    \end{equation*}
\end{definition}

\begin{definition}
    We say that $d\in \mathcal{D}$ is a \textbf{colimit} of $F$ if there exists a functor
    $\overline F:\mathcal{C}^\triangleright\to \mathcal{D}$ with $\overline F(*)=d$ and
    $\mathcal{D}^{F/}\simeq \mathcal{D}^{\overline F/}$ is a categorical equivalence.
\end{definition}

\begin{theorem}
    \mbox{}
    \begin{enumerate}
        \item Colimits in a quasicategory are invariant upto categorical equivalence. In other words,
            if we have an equivalence $\mathcal{C}\simeq \mathcal{C}'$ and $\mathcal{D}\simeq \mathcal{D}'$
            with a commutative diagram
            \begin{equation*}
                \begin{tikzcd}
                    \mathcal{C} \rar\dar{F} &\mathcal{C}'\dar{F'}\\
                    \mathcal{D} \rar &\mathcal{D}'
                \end{tikzcd}
            \end{equation*}
            then $\colim_\mathcal{C} F = \colim_{\mathcal{C}'}F'.$
            \marginnote{What does this mean?}
        \item The simplicial set $\Fun(\mathcal{C},\mathcal{D})$ is a quasicategory
            if $\mathcal{C},\mathcal{D}$ are quasicategories, and is invariant
            up to categorical equivalence. In other words, there is a categorical equivalence
            of quasicategories $\Fun(\mathcal{C},\mathcal{D})\simeq \Fun(\mathcal{C}',\mathcal{D}')$.
    \end{enumerate}
\end{theorem}

The proof is a straightforward exercise in model categorical language and we might
work through this in the future. First let's explain why these results are so great,
and why they motivate working with quasicategories.

Consider $\Diskir = \varinjlim\Diskr$ the sequential limit.
One finds that $\Diskir\simeq \mathsf{Fin}$.
For motivation for why this might be true, recall that
$\Emb^\text{rect}(\coprod_2 D^n,D^n)\simeq S^{n-1}$ and as $n$ grows large
we obtain $S^\infty$, which is contractible. A basic question one might ask
is whether there is a factorization
\begin{equation*}
    \begin{tikzcd}
        \Diskir \rar\dar & \mathsf{Top} \\
        \mathsf{Fin}\ar[ur,dashed]
    \end{tikzcd}
\end{equation*}
It turns out that there does not exist such a factorization in general:
\begin{equation*}
    \Fun(\mathsf{Fin},\mathsf{Top}) \not\simeq \Fun(\Diskir, \mathsf{Top})
\end{equation*}
This is stemming from the fact that infinite loop spaces are not equivalent to 
topological groups.
\marginnote{Expand on what this has to do with $\infty$-categories. Is the point
that passing to $\infty$-categories will yield an equivalence?}

\newpage

\section{Homotopy invariance I [10/13/2017]}

Recall there was a homework problem to show that there is a continuous assignment $\Maps_c(U,Z)\to\Maps_c(V,Z)$.
I should have specified that we are to give $\Maps_c(U,Z)$ the subspace topology as inherited from $\Maps_*(U^+,Z)$.
If we view it as a subspace of $\Maps(U,Z)$ this is statement is not true.
Of course, this did not seem to prevent you from proving it\ldots you know what they say---where there's
a will, there's a way.
Anyway, for the next homework revise that solution.
In addition, do the following for \textbf{homework.}

\begin{exercise}
    Prove that there is a homeomorphism $|\Delta[n]|\cong\Delta^n$. Moreover, show that
    the geometric realization $|X|$ of a simplicial set $X$ has the structure of a CW
    complex with an $n$-cell for each nondegenerate $n$-simplex.
\end{exercise}

I want to give you a good taste of proofs in quasicategory theory, without having
to prove absolutely everything. The following (the homotopy invariance of colimits)
should be a good pedagogical example
with which we can ``get in and get out'' of the theory of quasicategories. The main
reference will of course be Jacob Lurie's Higher Topos Theory \cite{lurie}.
\begin{proposition}[HTT proposition 1.2.9.3]
    Let $p:\mathcal{C}\to\mathcal{D}$ be a map of quasicategories and $j:K\to\mathcal{C}$
    be any map. Then if $p$ is an equivalence, so is the induced map
    \begin{equation*}
        \begin{tikzcd}
            \mathcal{C}^{j/} \rar{\sim} & \mathcal{D}^{p\circ j/}.
        \end{tikzcd}
    \end{equation*}
\end{proposition}
Matt: how does this relate to the notion of pointwise homotopy invariance?
John: this result is a bit harder than that one.
\marginnote{How does this imply the statement last lecture about colimits?}

Let's outline the proof:
\begin{enumerate}
    \item $\mathcal{C}^{j/}$ is a quasicategory
    \item $\mathcal{C}^{j/}\to\mathcal{C}$ is a left fibration
    \item Given two left fibrations $\mathcal{C}', \mathcal{C}''$ over $\mathcal{C}$, 
        and a compatible map $g$ between them, then $g$ is an equivalence if it is
        an equivalence on fibers. In other words it is an equivalence if for all $x\in \mathcal{C}$
        the map $\mathcal{C}'\times_{\mathcal{C}}\{x\} \to \mathcal{C}''\times_\mathcal{C}\{x\}$ is
        an equivalence of Kan complexes.
\end{enumerate}

We'll begin by showing (2). We first need a definition.
\begin{definition}
    For $X,Y$ simplicial sets, the \textbf{join} $X\star Y$ is the simplicial set given on
    totally ordered sets as
    \begin{equation*}
        (X\star Y)(J) = \coprod_{J=I\coprod I'} X(I)\times Y(I')
    \end{equation*}
    where in the coproduct, every element of $I$ is less than every element of $I'$.
    Equivalently,
    \begin{equation*}
        (X\star Y)([n]) = X_n \sqcup \left( \coprod_{i+j=n-1}X_i\times Y_j \right)\sqcup Y_n
    \end{equation*}
\end{definition}
In the case where $C, D$ are categories, one can check that
the usual join $C\star D$, which has
\begin{equation*}
    \Hom_{C\star D}(x,y) =
    \begin{cases}
        \Hom(x,y) & x,y\in C\text{ or }x,y\in D \\
        * & x\in C, y\in D \\
        \varnothing & \text{otherwise}
    \end{cases}
\end{equation*}
has the property that its nerve is the quasicategorical join of the corresponding
nerves of $C$ and $D$. A similar statement is true for spaces.
Another thing to check is that $X^\triangleright=X\star \Delta[0]$.
\textbf{Homework 6:} Check that $\Delta[n]\star\Delta[m]\cong \Delta[n+m+1]$
\begin{definition}
    A class of morphisms $S\subset C$ (for $C$ an ordinary category) is \textbf{weakly saturated}
    if it is
    \begin{enumerate}
        \item closed under pushouts,
        \item closed under (transfinite) composition,
        \item and closed under retracts.
    \end{enumerate}
\end{definition}
This notion is important because any map that has a lifting property with respect
to some class of morphisms $S$ then it will also have the lifting property with respect to 
the weakly saturated closure. \marginnote{Did I say this correctly?}

\begin{definition}
    We say that $A\to B$ is \textbf{left/right/inner anodyne} if it belongs to
    the smallest weakly saturated class containing (for $n\geq 1$),
    $\{\Lambda_i[n]\hookrightarrow \Delta[n], i<n\}$ (left),
    $\{\Lambda_i[n]\hookrightarrow \Delta[n], i>n\}$ (right),
    $\{\Lambda_i[n]\hookrightarrow \Delta[n], 0<i<n\}$ (inner).
\end{definition}
Notice that ``anodyne'' is an english word meaning inoffensive, bland,
or unproblematic.

\begin{lemma}[HTT proposition 2.1.2.3]
    Given inclusions of simplicial sets $f:A_0\subset A, g:B_0\subset B$ such that
    $f$ is right anodyne or $g$ is left anodyne, then
    \begin{equation*}
        A_0\star B \coprod_{A_0\star B_0} A\star B_0\hookrightarrow A\star B
    \end{equation*}
    is inner anodyne.
\end{lemma}
\begin{proof}
    The two cases are dual so we will just do the case where $f$ is right anodyne.
    Consider the class of all morphisms $f:A_0\to A$ for which the inclusion of the
    proposition is inner anodyne.
    This class is weakly saturated whence it suffices to show that it contains
    $\Lambda_i[n]\subset\Delta[n]$
    for $0 < i \leqslant n$. We thus suppose that $f$ is of this form.
    Similarly for $g$: reduce $g: \partial\Delta[m]\subset \Delta[m]$.
    We now have
    \begin{equation*}
        \Lambda_i[n]\star \Delta[m] \coprod_{\Lambda_i[n]\star\partial\Delta[m]}\Delta[n]\star \partial\Delta[m]\hookrightarrow \Delta[n+m+1].
    \end{equation*}
    \textbf{More homework:} $\Lambda_i[n]\star\partial\Delta[m]\cong \Lambda_i[n+m+1]$, which
    concludes the proof.
\end{proof}

\begin{definition}
    We say that $X\to Y$ is a \textbf{inner/left/right fibration} if it has the right
    lifting property with respect to inner/left/right anodyne maps.
\end{definition}

\begin{proposition}[HTT proposition 2.1.2.1]
    Given $A\subset B\xrightarrow{p} X\xrightarrow{q} S$, with $r=q\circ p$ and $r_0:A\subset B$,
    with $q$ an inner fibration. Then $X^{p/}\to X^{p_0/}\times_{S^{r_0/}}S^{r/}$ is a left fibration.
\end{proposition}

This is all to show that $\mathcal{C}^{p/}\to \mathcal{C}$ is a left fibration (and that the domain
is a quasicategory).

Sam: what does a left fibration geometrically realize to? A quasifibration? John: Yeah.
[Correction next lecture: I meant to say no. There is a paper of Quillen in the Annals,
    titled something like: ``the geometric realization of a Kan fibration is a Serre fibration.''
    You can guess what the main theorem is. It turns out that for $X\to Y$ a left (or right)
    fibration it is not necessarily true that $|X|\to |Y|$ is a quasifibration. As an
    example, consider the left fibration $\mathcal{C}^{x/}\to\mathcal{C}$. Consider the fiber
    \begin{equation*}
        \begin{tikzcd}
            \Maps_{\mathcal{C}}(x,y) \rar\dar & \mathcal{C}^{x/}\dar \\
            \{y\} \rar & \mathcal{C}
        \end{tikzcd}
    \end{equation*}
    This cannot possibly yield a quasifibration. Consider a $y'$ with a map
    $y\to y'$. We get a similar fiber $\Maps_{\mathcal{C}}(x,y)$.
    But there is no reason for these mapping spaces to be homotopy equivalent
    (and similarly after taking geometric realization).

    Let's recall Quillen's theorem B. Given $\mathcal{C}\to \mathcal{D}$ and
    the fiber diagram
    \begin{equation*}
        \begin{tikzcd}
            \mathcal{C}^{d/} \rar\dar & \mathcal{C}\dar\\
            \{d\} \rar & \mathcal{D}
        \end{tikzcd}
    \end{equation*}
    one might ask when taking classifying spaces yields again a homotopy pullback.
    This is true if for all $d\to c$ in $\mathcal{D}$ we have that $B\mathcal{C}^{d/}\simeq B\mathcal{C}^{c/}$.]

\newpage

\section{Homotopy invariance II [10/16/2017]}

Today we'll discuss the proof of the following fact, which was (1) in our outline proof
of homotopy invariance.
\begin{corollary}[HTT 2.1.2.2]
    For all $K\xrightarrow{p}\mathcal{C}$ the associated undercategory $\mathcal{C}^{p/}$ is a quasicategory.
\end{corollary}
\begin{proof}
    We claim that $\mathcal{C}^{p/}\to \mathcal{C}$ is a left fibration. Left implies inner, so
    composing with the map to the point implies that $\mathcal{C}^{p/}\to \mathcal{C}\to \Delta[0]$
    is an inner fibration (it is easy to check that compositions of fibrations are fibrations directly
    from the lifting property). We conclude that $\mathcal{C}^{p/}$ is a quasicategory.
    
    It remains to show that $\mathcal{C}^{p/}\to \mathcal{C}$ is a left fibration,
    which we do below.
\end{proof}

Recall from last time we had shown (if you include the homework) the following.
\begin{lemma}[HTT 2.1.2.3]
    Given $f:A_0\hookrightarrow A, g:B_0\hookrightarrow B$ with either $f$ right anodyne
    or $g$ left anodyne then
    \begin{equation*}
        A_0\star B\coprod_{A_0\star B_0}A\star B_0 \hookrightarrow A\star B
    \end{equation*}
    is inner anodyne.
\end{lemma}

This immediately implies
\begin{proposition}[HTT 2.1]
    Given $A\subset B\xrightarrow{p} X\xrightarrow{q} S$ with the inclusion denoted $r_0$
    and the composition $q\circ p =: r$ where $q$ is an inner fibration, then 
    \begin{equation*}
        X^{p/} \to X^{p_0/}\times_{S^{r_0/}} S^{r/}
    \end{equation*}
    is a left fibration.
\end{proposition}
\begin{proof}
    Recall that the data of a map $J\to \mathcal{C}^{p/}$ for $p:K\to\mathcal{C}$ is precisely the data of
    a map $K\star J\to \mathcal{C}$ such that $K\star\varnothing\to \mathcal{C}$ is $p$.
    To check that the given map is a left fibration we look at a diagram
    \begin{equation*}
        \begin{tikzcd}
            \Lambda_k[n]\dar \rar & X^{p/}\dar\\
            \Delta[n] \rar\ar[ur,dashed] & X^{p_0/}\times_{S^{r_0/}}S^{r/}
        \end{tikzcd}
    \end{equation*}
    Let's apply our adjunction to obtain compatible maps
    \begin{equation*}
        \begin{tikzcd}
            B\star\Lambda_k[n] \rar & X \\
            A\star \Delta[n] \rar & X \\
            B\star \Delta[n] \rar & S \\
            A\star \Delta[n] \rar & S
        \end{tikzcd}
    \end{equation*}
    Putting these together,
    \begin{equation*}
        \begin{tikzcd}
            B\star \Lambda_k[n] \cup_{A\star \Lambda_k[n]} A\star \Delta[n] \rar\ar[d,hook] & X \dar\\
            B\star \Delta[n] \rar & S
        \end{tikzcd}
    \end{equation*}
    and applying the lemma above, the vertical map on the left is inner anodyne, whence
    because $X\to S$ is an inner fibration, there exists a lift.
\end{proof}

This concludes the proof that the undercategory is a quasicategory. To see this,
we apply the proposition to the case where $X=\mathcal{C}$, $A=\varnothing$, and $B=*$.
Hence $\mathcal{C}^{p/}\to \mathcal{C}$ is a left fibration.\marginnote{Huh?}

Sean: is there a time when it matters that these were left fibrations and not just inner?
John: absolutely. Think of inner as a technical condition but left/right as a homotopy
invariant property. In particular, every functor is equivalent to an inner fibration.
This is not at all true for left fibrations. In particular,
$\mathsf{LFib}_\mathcal{D}\simeq \Fun(\mathcal{D},\mathsf{Spaces})$---they're
like ``fiber bundles with connection on $\mathcal{D}$.''

\begin{proposition}[HTT 1.2.5.1]
    For $\mathcal{C}$ a simplicial set the following are equivalent:
    \begin{enumerate}
        \item $\mathcal{C}$ is a quasicategory and $\mathsf{h}\mathcal{C}$ is a groupoid;
        \item $\mathcal{C}\to *$ is a left fibration;
        \item $\mathcal{C}\to *$ is a right fibration;
        \item $\mathcal{C}\to *$ is a Kan fibration, i.e. $\mathcal{C}$ is a Kan complex.
    \end{enumerate}
    If any of these are try we call $\mathcal{C}$ an \textbf{$\infty$-groupoid} or \textbf{space}.
\end{proposition}

\begin{proposition}[HTT 1.2.4.3]
    A morphism $\phi:\Delta[1]\to\mathcal{C}$ in a quasicategory $\mathcal{C}$ is
    an equivalence if and only if for any extension $f_0:\Lambda_0[n]\to\mathcal{C}$
    \begin{equation*}
        \begin{tikzcd}
            \Delta[1] \dar[hook] \rar{\phi} & \mathcal{C}\\
            \Lambda_0[n]\dar[hook] \ar[ur]{f_0} & \\
            \Delta[n]\ar[uur,dashed]{f} &
        \end{tikzcd}
    \end{equation*}
    there is a lift to a map $f:\Delta[n]\to\mathcal{C}$.
\end{proposition}
\begin{proof}
    By adjunction
    \begin{equation*}
        \begin{tikzcd}
            \{0\} \rar\dar & \mathcal{C}/\Delta[n-2]\dar \\
            \Delta[0<1] \rar\ar[ur,dashed] & \mathcal{C}/\partial\Delta[n-2]
        \end{tikzcd}
    \end{equation*}
    That proves one direction. For the other direction take a map $\phi:x\to y$.
    We have a filler $\Lambda_0[2]\hookrightarrow\Delta[2]\xrightarrow{\psi} \mathcal{C}$ call it $\sigma$.
    This 2-simplex $\sigma$ gives a homotopy $\id_x\simeq \psi\circ\phi$. Show that
    $\phi\circ\psi\simeq \id_y$ for \textbf{homework.}
\end{proof}

This implies the equivalence of $(1)\iff (2)$ and dually $(1)\iff (2)$. But
then $(1)\iff (2)+(3)=(4)$.

\newpage

\section{Homotopy invariance III [10/18/2017]}

Recall last time we wanted to prove Proposition 1.2.5.1.
\begin{proof}
    To show that (1)$\implies$(2) notice that every $\Delta[1]\to\mathcal{C}$ is a homotopy equivalence.
    Choose any $f_0$
    \begin{equation*}
        \begin{tikzcd}
            \Lambda[n] \rar{f_0}\dar[hook] & \mathcal{C} \\
            \Delta[n]\ar[ur, dashed] 
        \end{tikzcd}
    \end{equation*}
    and now by the previous proposition there exists an extension
    \begin{equation*}
        \begin{tikzcd}
            \Delta[0<1] \ar{rd}\dar \\
            \Lambda_0[n] \rar\dar[hook] & \mathcal{C} \\
            \Delta[n]\ar[ur,dashed]{f}
        \end{tikzcd}
    \end{equation*}
    To see that (2)$\implies$(1) draw the same picture and apply the proposition,
    which implies that $\phi$ is an equivalence.

    Notice that by taking opposites $(1)\iff(2)$ implies $(1)\iff(3)$, since taking
    opposites takes left fibrations to right fibrations. Hence $(1)\iff (2)+(3)$.
    But being a left and right fibration is the same as being a Kan fibration, which
    completes the proof.
\end{proof}

\begin{corollary}
    If $\mathcal{C}$ is a quasicategory there exists a maximal sub-Kan complex
    $\mathcal{C}^0$ whose morphisms consist of the homotopy equivalences in $\mathcal{C}$.
    \marginnote{Figure out the HTT number. Fix the notation to tilde.}
\end{corollary}
\begin{proof}
    We can define $\mathcal{C}^0$ as the subsimplicial set with 1-simplices
    the homotopy equivalences. $\mathcal{C}^0$ is a quasicategory, and $\mathsf{h}\mathcal{C}^0$
    is a groupoid if and only if $\mathcal{C}^0$ is a Kan complex.
\end{proof}
In particular we have $\mathsf{Kan}\subset \mathsf{QCat}\subset\mathsf{sSet}$
and the construction in the corollary is the right adjoint to the inclusion
$\mathsf{Kan}\hookrightarrow\mathsf{QCat}$.

Recall that our purpose was to show that colimits in quasicategories are invariant
with respect to categorical equivalence. In particular, given $J\xrightarrow{j}\mathcal{C}\xrightarrow{p}\mathcal{D}$
where $p$ is a categorical equivalence, we want to show that $\mathcal{C}^{j/}\simeq \mathcal{D}^{p\circ j/}.$
We first needed the undercategories to be quasicategories. This we showed last time.
Next we show that the two horizontal arrows
\begin{equation*}
    \begin{tikzcd}
        \mathcal{C}^{j/} \rar\ar[dr] & \mathcal{D}^{p\circ j/}\times_\mathcal{D}\mathcal{C} \rar\dar & \mathcal{D}^{p\circ j/}\\
        & \mathcal{C}
    \end{tikzcd}
\end{equation*}
are equivalences. To see that the first is an equivalence we observe first
that the vertical maps in the triangle are left fibrations, whence it is
enough to show that it produces an equivalence on fibers. Thus we need
the following. Given
\begin{equation*}
    \begin{tikzcd}
        \mathcal{C'}\dar{g}\rar{p} & \mathcal{C}''\ar[dl]{h}\\
        \mathcal{D}
    \end{tikzcd}
\end{equation*}
where $g$ and $h$ are left fibrations, we wish to show that $p$ is an equivalence
if and only if $\mathcal{C}'_d\to \mathcal{C}''_d$ is an equivalence of Kan
complexes for all $d\in\mathcal{D}$. To prove this it's easiest to prove a slightly
more general result. Then we need
\begin{lemma}[HTT 2.5.4.1]
    Given $J\to \mathcal{C}\to \mathcal{D}$ with the map from $\mathcal{C}$ to $\mathcal{D}$
    an equivalence, then $\mathcal{C}^{j/}\times_\mathcal{C}\{x\}\to\mathcal{D}^{p\circ j/}\times_\mathcal{D}\{px\}$
    is an equivalence of Kan complexes for all $x\in \mathcal{C}$.
\end{lemma}

The following picture is good to keep in mind:
\begin{equation*}
    \begin{tikzcd}
        & \text{Kan fibration}\ar[dl]\ar[dr] & \\
        \text{left fibration}\dar & & \text{right fibration}\dar \\
        \text{coCartesian fibration}\ar[dr] & & \text{Cartesian fibration}\ar[dl] \\
        & \text{inner fibration} &
    \end{tikzcd}
\end{equation*}
Recall that an inner fibration is more of a technical condition rather than
having some homotopy invariant meaning. Each of these fibrations (except for
inner fibrations) are classified by functors to a representing object.
\begin{example}
    Consider a functor $F:[1]\to \mathsf{Cat}$. Call $F(0)=\mathcal{C}, F(1)=\mathcal{D}$.
    From this we can construct a category $\mathcal{M}=\cyl(F) := \mathcal{C}\times[1]\coprod_{\mathcal{C}\times\{1\}}\mathcal{D}$
    which sits over $[1]$, $\mathcal{M}\to [1]$. This cylinder construction is
    a map $\Fun([1],\mathsf{Cat})\to \mathsf{Cat}_{/[1]}$. You should think of this as
    the most basic example of an ``unstraightening construction''. The categories you
    obtain are the coCartesian fibrations over $[1]$.
\end{example}
\begin{definition}
    We say that a \textbf{correspondence} between two categories $\mathcal{C}$ and $\mathcal{D}$
    is a functor $\mathcal{M}\to[1]$ with $\mathcal{M}_0\cong \mathcal{C}$ and $\mathcal{M}_1\cong \mathcal{D}$.
\end{definition}
This construction gives us correspondences but not all correspondences arise this way.
If we consider a span $\mathcal{E}$ from $\mathcal{C}$ to $\mathcal{D}$ we can produce a correspondence.
In particular take the parameterized join $\mathcal{C}\star_\mathcal{E}\mathcal{D}=\mathcal{C}\coprod_{\mathcal{E}\times\{0\}}\mathcal{E}\times[1]\coprod_{\mathcal{E}\times\{1\}}\mathcal{D}$ over $[1]$.

If our fibrations in our diagram above are over $\mathcal{C}$ (except for the inner fibration, say),
then we get a diagram before unstraightening
\begin{equation*}
    \begin{tikzcd}
        & \Fun(\mathcal{C}, \mathsf{Gpd}_\infty^0)\ar[ld]\ar[rd] &\\
        \Fun(\mathcal{C}, \mathsf{Gpd}_\infty)\dar  & & \Fun(\mathcal{C},\mathsf{Gpd}_\infty^\text{op})\dar \\
        \Fun(\mathcal{C},\mathsf{Cat}_\infty) & & \Fun(\mathcal{C}, \mathsf{Cat}_\infty^\text{op})
    \end{tikzcd}
\end{equation*}
Note: unstraightening is also known as the ``Grothendieck construction.''
In particular given $F:\mathcal{C}\to \mathsf{Cat}_\infty$ then the fiber is just $F(x)$ over $x$:
\begin{equation*}
    \begin{tikzcd}
        F(x) \rar\dar & \mathcal{C}_F\dar \\
        \{x\} \rar & \mathcal{C}
    \end{tikzcd}
\end{equation*}
\begin{corollary}
    Suppose we have a map $\mathcal{C}'\to \mathcal{C}''$ of left fibrations over $\mathcal{C}$, if 
    $\mathcal{C}'=\mathcal{C}_F$ and $\mathcal{C}''=\mathcal{C}_G$ (unstraightening) with
    the map of fibrations being induced by a natural transformation $\alpha$ sending $F\implies G:\mathcal{C}\to \mathsf{Gpd}_\infty$.
    Then the map is an equivalence if and only if $\alpha$ is an equivalence if and only if
    $F(x)\xrightarrow{\alpha}G(x)$ is an equivalence i.e. $\mathcal{C}'_x\to \mathcal{C}''_x$
    is an equivalence.
\end{corollary}
We would have to prove a lot of this stuff to prove our fact, so we will probably take
it for granted.

\textbf{Principle}: any construction from category theory that only uses universal properties
goes through for $\infty$-categories. 

The reason this unstraightening stuff is important because it's generally easier to
think about functors out of things instead of fibrations. On the other hand,
fibrations (unstraightened things) are generally easier to construct.

\newpage

\section{Back to topology [10/20/2017]}

\subsection{Finishing up homotopy invariance}

\begin{lemma}[HTT 2.4.5.1]
    Given $K\xrightarrow{j}\mathcal{C}\xrightarrow{p}\mathcal{D}$ where $p$ is an
    equivalence, we wish to show that
    \begin{equation*}
        \mathcal{C}^{j/}\times_\mathcal{C}\{x\} \simeq \mathcal{D}^{p\circ j}\times_\mathcal{D}\{px\},
    \end{equation*}
    for all $x\in \mathcal{C}$.
\end{lemma}
\begin{proof}
    We will induct on $K$. The base case is where $K=\{c\}$. In this case the left hand side is
    $\Maps_\mathcal{C}(c,x)$ and the right hand side is $\Maps(pc,px)$. Hence we obtain an
    equivalence by assumption that $\mathcal{C}\simeq \mathcal{D}$. For the inductive step consider
    the pushout
    \begin{equation*}
        \begin{tikzcd}
            \partial\Delta[n] \rar{\bar f}\dar & K_\alpha\dar{f} \\
            \Delta[n] \rar{f} & K_{\alpha+1}
        \end{tikzcd}
    \end{equation*}
    Write $C_\alpha=\mathcal{C}^{j_\alpha/}\times_\mathcal{C}\{x\}$ and
    $D_\alpha=\mathcal{D}^{j_\alpha\circ p/}\times_\mathcal{D}\{px\}$,
    where $j_\alpha$ is the restriction of $j$ to $K_\alpha\to K$. Now
    \begin{equation*}
        \mathcal{C}^{j_{\alpha+1}/} = \mathcal{C}^{j_\alpha/}\times_\mathcal{C}^{\partial\Delta[n]/} \mathcal{C}^{\Delta[n]/}.
    \end{equation*}
    This implies that $C_{\alpha+1}$ is the pullback
    \begin{equation*}
        \begin{tikzcd}
            C_{\alpha+1}\rar\dar & C_\alpha\dar \\
            C_f \rar & C_{f|_{\partial\Delta[n]}}
        \end{tikzcd}
    \end{equation*}
    Here $C_f=\mathcal{C}^{\Delta[n]/}\times_\mathcal{C}\{x\}$.
    Now since $\mathcal{C}^{\Delta[n]/}\to \mathcal{C}^{\partial\Delta[n]/}$ is a left fibration
    we find that the bottom arrow in the square above is a left fibration. However,
    both the source and the target are Kan complexes, whence the arrow is in fact a Kan
    fibration (this is a lemma we will not prove---it is just a parameterized version
    of something we have already proven). Draw the same diagram for $D$
    \begin{equation*}
        \begin{tikzcd}
            D_{\alpha+1}\rar\dar & D_\alpha\dar \\
            D_f \rar & D_{f|_{\partial\Delta[n]}}
        \end{tikzcd}
    \end{equation*}
    and note that by the inductive step $C_\alpha\simeq D_\alpha$ and $C_f\simeq D_f$.
    By induction we get equivalences which induce an equivalence $C_{\alpha+1}\simeq D_{\alpha+1}$
    because the bottom arrows are Kan fibrations.
\end{proof}

We will implicitly regard 1-categories as $\infty$-categories via the nerve.

\subsection{Back to factorization homology}

\begin{theorem}
    Let $\mathsf{Spaces}$ be the $\infty$-category of spaces and ${\Disk}_{/M}$
    be the (nerve of) category of $n$-disks. Then
    \begin{equation*}
        \int_M \id := \colim\left( {\Disk}_{/M}\xrightarrow{\id} \mathsf{Spaces} \right) \simeq M
    \end{equation*}
\end{theorem}

\begin{definition}
    An $\infty$-category is \textbf{$\kappa$-filtered}, for $\kappa$ some ordinal, if
    for any $\kappa$-small $\mathcal{K}$ together with a functor $\mathcal{K}\to\mathcal{C}$,
    there exists a factorization
    \begin{equation*}
        \begin{tikzcd}
            \mathcal{K} \rar\dar & \mathcal{C} \\
            \mathcal{K}^\triangleright \ar[ur, dashed]
        \end{tikzcd}
    \end{equation*}
\end{definition}
For some intuition recall the analogous 1-categorical definition.
\begin{definition}
    For $\mathcal{C}$ an ordinary category, we say that $C$ is \textbf{filtered} if
    \begin{enumerate}
        \item for any finite set $\{x_i\}$ of objects there exists an $x$ such that there is a map $x_i\to x$ for all $i$,
        \item and for all $f,g: x\rightrightarrows y$ there exists $h:y\to z$ such that $hf=hg$.
    \end{enumerate}
\end{definition}
\begin{example}
    As a simple example consider the category of natural numbers $\N$ with
    unique morphisms $m\to n$ when $m\leq n$. Condition (1) is clear and condition
    (2) is trivial due to the hom-sets being (at most) one-element sets.
\end{example}
\begin{example}
    If $\mathcal{C}$ has a final object then $\mathcal{C}$ is filtered.
\end{example}
\begin{example}
    Consider the subposet of open subsets of $M$ that contain a fixed point $p\in M$,
    $\mathsf{Opens}(M)_p^\text{op}\subset \mathsf{Opens}(M)^\text{op}$. Notice
    that $\{p\}$ wants to be a final object, but it need not be open. Let's check
    that this is filtered. For any finite collection $\{U_i\}$ the intersection
    $x=\cap_I U_i$, gives us the first condition.
    Now suppose we have $f, g:U_i\to U_j$. In this case we just let $z=U_j$: our
    category is a poset so $f=g$ already. Hooray.
\end{example}

\begin{lemma}
    If $\mathcal{C}$ is filtered as a 1-category then it is filtered as an $\infty$-category.
\end{lemma}
To see this, notice that any category can be built as a colimit in $\mathsf{Cat}$ from
one-point categories.
\begin{proof}[Proof idea]
    Induct on $\mathcal{K}$, building by coproducts and equalizers.
\end{proof}
Filtered categories are nice because colimits indexed by them enjoy good properties.
\begin{lemma}[HTT 5.3.1.20]
    If $\mathcal{C}$ is filtered then $B\mathcal{C}\simeq *$.
\end{lemma}
Recall that we are speaking model-independently---$B$ is the left adjoint to the
inclusion $\mathsf{Spaces}\hookrightarrow\mathsf{Cat}_\infty$. In particular,
given a map $\mathcal{C}\to X$ for $X$ a space it factors uniquely up to homotopy
through the classifying space.

If we think of quasicategories, it is the left-adjoint of the inclusion $\mathsf{Kan}\hookrightarrow \mathsf{QCat}$.
What does it do? Well it is a colimit-preserving functor, so we should describe it
on the building blocks $\Delta[n]$. By definition $\Delta[n]=N_\bullet([n])$ where
by $[n]$ we think of the poset as a category. Define $[n]'$ to be the smallest groupoid
with objects that of $[n]$.\marginnote{Wouldn't this just be the discrete groupoid?}
As a category, $[n]'\simeq *$. Recall that $\Delta[n]$ is
a quasicategory but not a Kan complex. We send $\Delta[n]$ to $N_\bullet([n]')$.

\newpage

\section{Computing factorization homology [10/25/17]}

Goette, Igusa, Williams have a theorem (in the stable range): you get all exotic
bundle structures through Hatcher's construction. This is related to factorization homology.
Anyway, back to filtered $\infty$-categories.

\begin{proof}[Proof of HTT 5.3.1.20]
    This proof will be model-dependent. Let $\mathcal{C}$ be a quasicategory. Then
    $B\mathcal{C}=|\mathcal{C}|$, the geometric realization.
    Take any finite subcomplex $K\hookrightarrow |\mathcal{C}|$.
    This is represented by a map $\bar K\to \mathcal{C}$ where $\bar K$
    is a simplicial set such that $|\bar K|=K$. Since $\mathcal{C}$ is filtered,
    there exists a factorization of this map through $\bar K^\triangleright\to \mathcal{C}$.
    Taking geometric realizations we have
    \begin{equation*}
        \begin{tikzcd}
            K \rar\dar & \lvert\mathcal{C}\rvert \\
            *\simeq |\bar K^\triangleright| \ar[ur,dashed]
        \end{tikzcd}
    \end{equation*}
    which implies that any finite subcomplex of $|\mathcal{C}|$ is contractible.
    We conclude that $|\mathcal{C}|$ is contractible.
\end{proof}

\begin{theorem}
    Consider the identity functor $\id:\disk \to \mathsf{Spaces}$. Then
    \begin{equation*}
        \int_M \id \simeq M.
    \end{equation*}
\end{theorem}
\begin{proof}
    We use a hypercover argument. In particular, we will use without proof (for now)
    that given a functor $\mathcal{C}\subset \mathsf{Opens}(M)\xrightarrow{\id}\mathsf{Spaces}$
    such that $B\mathcal{C}_x\simeq *$ for all $x\in M$ then
    \begin{equation*}
        \hocolim_\mathcal{C} \id \simeq M.
    \end{equation*}
    Apply this fact to $\mathcal{C}=\diskm\to \mathsf{Opens}(M)$. We have to show
    that $(\diskm)_x\simeq *$. We will show that $(\diskm)_x$ is cofiltered.
    In particular, we need to show that for any finite collection $\{U_i\ni x\}$
    there exists $U$ with $U\to U_i$.
    Take any $U\cong\R^n\subset\cap_i U_i$ containing $x$. Then we need to show that
    for any two maps $U_i\to U_j$, there is a map $U\to U_i$ equalizing them. But this
    is clear because we are in a poset so there is only one map from $U_i$ to $U_j$
    \marginnote{This is not true unless we are looking at the image of the $n$-disks.}
    Now, using the fact that $B\mathcal{C}\simeq B\mathcal{C}^\text{op}$ (alternatively
    repeat above arguments with cofiltered and left cones), we are done by the above lemma.
\end{proof}

\begin{definition}
    We say that $F:\mathcal{C}\to \mathcal{D}$ and $G:\mathcal{D}\to \mathcal{C}$ is an
    adjunction if there are natural equivalences
    \begin{equation*}
        \Maps_{\mathcal{D}}(Fx, y) \simeq \Maps_{\mathcal{C}}(x, Gy).
    \end{equation*}
\end{definition}

\begin{proposition}
    Left adjoints preserve colimits and right adjoints preserve limits.
\end{proposition}
\begin{proof}
    The proof is the same as the 1-categorical case. Suppose we have $j:J\to \mathcal{C}$.
    We want to verify that if $\colim_j \simeq x$ then $\colim_J F\circ j\simeq F(x)$.
    In other words, given $\mathcal{C}^{j/}\simeq \mathcal{C}^{x/}$ we want
    to show that $\mathcal{D}^{F\circ j/}\simeq \mathcal{D}^{F(x)/}$. But the maps
    from these latter two to $\mathcal{D}$ is a left fibration whence it suffices to
    show that the fibers are equivalent: for all $d\in\mathcal{D}$,
    \begin{equation*}
        \Maps_\mathcal{D}(F(x), d) \simeq \Maps_{\Fun(J,\mathcal{D})}(F\circ j, \underline{d}).
    \end{equation*}
    By our adjunction,
    \begin{equation*}
        \Maps_{\mathcal{D}}(F(x),d) \simeq \Maps_\mathcal{C}(x, G(d)) \simeq \Maps_{\Fun(J,\mathcal{C})}(j,\underline{G(d)}).
    \end{equation*}
    But
    \begin{equation*}
        \Maps_{\Fun(J,\mathcal{C})}(j,\underline{G(d)})\simeq \lim_{z\in J^{\text{op}}}\Maps_{\mathcal{C}}(jz, Gd)
    \end{equation*}
    and
    \begin{equation*}
        \Maps_{\Fun(J,\mathcal{D})}(F\circ j,\underline{d})\simeq \lim_{z\in J^\text{op}}\Maps_\mathcal{D}(Fjz, d),
    \end{equation*}
    which are the same by our adjunction.

    Notice that this is a model independent proof.
\end{proof}

The following is an important adjunction (of $\infty$-categories) to keep in mind.
The singular chains $C_*:\mathsf{Spaces}\to \mathsf{Ch}$ has a right
adjoint $G$ such that $\pi_*GV$ is $H_*V$ for $*\geq 0$ and 0 otherwise.
This comes from the adjunction between $\mathsf{sSet}$ and $\mathsf{sAb}$
given by free abelian group and forgetful funtors. Hence $C_*$ preserves
(homotopy) colimits. 

Notice that there exists a unique colimit preserving functor $F:\mathsf{Spaces}\to \mathcal{V}$
for $\mathcal{V}$ any $\infty$-category with colimits with $F(*)=v$ since any space
is built as a colimit of contractible spaces. In particular, any $X=\colim(\mathcal{U}\xrightarrow{j}\mathsf{Spaces})$
where $u\mapsto ju\simeq *$, which yields the same colimit as the constant diagram $\mathcal{U}\to \mathcal{V}$
and $F(X)=\colim(\mathcal{U}\to \mathcal{V})$.

Let's do another calculation. Consider the functor $\Z^\oplus:\disk\to\mathsf{Ch}$
sending $\coprod_I \R^n\mapsto \Z^{\oplus I}$. Let's calculate $\int_M\Z^\oplus$.
Notice first that $\Z^{\oplus I}\simeq C_*(\coprod_I\R^n)$. Hence
\begin{equation*}
    \int_M \Z^\oplus \simeq \int_M C_*\circ \id = \colim\left( {\disk}_{/M}\xrightarrow{\id}\mathsf{Spaces}\xrightarrow{C_*}\mathsf{Ch}\right).
\end{equation*}
Since $C_*$ is colimit preserving,
\begin{equation*}
    \int_M \Z^\oplus \simeq C_*\colim\left( {\disk}_{/M}\xrightarrow{\id}\mathsf{Spaces} \right) \simeq C_*\int_M \id \simeq C_* M.
\end{equation*}
Similarly for those of you familiar with spectra, there is a adjunction of spaces with spectral
given by $\Omega^\infty$ and $\Sigma_*^\infty$ and exactly the same proof shows that
\begin{equation*}
    \int_M \mathbb{S}^\oplus \simeq \Sigma_*^\infty M.
\end{equation*}

\begin{definition}
    Let $\disk^{=1}\subset \disk$ be those $n$-disks with $|I|=1.$
\end{definition}
Now repeating the arguments of this lecture for this subcategory, we find
\begin{equation*}
    \colim\left( {\disk^{=1}}_{/M}\xrightarrow{\id}\mathsf{Spaces} \right)\simeq M.
\end{equation*}
In other words, it is enough to probe manifolds with single-opens. However,
all of this seeming differential topology washes out.
\begin{proposition}
    There is an equivalence of $\infty$-categories ${\Disk^{=1}}_{/M}\simeq M$.
    Or as quasicategories, ${\Disk^{=1}}_{/M}\simeq \Sing(M)$.
\end{proposition}
\begin{proof}[Proof sketch]
    We construct a functor $\ev_0$ given by evaluation at 0 sending $\phi:\R^n\hookrightarrow M\mapsto \phi(0)\in M$.
    This functor induces an equivalence on objects so it remains to check on mapping spaces.
    In particular, need to check $\Maps_{ {\Disk}_{/M}}(\R^n,\R^n)\simeq \Omega M$.
\end{proof}

Now using that ${\disk}_{/M}\to {\Disk}_{/M}$ is a localization, we find that $\colim_M *\simeq M$.

\newpage

\section{Nonabelian Poincar\'e duality I [10/27/2017]}

\begin{example}
    Recall we have the free $E_n$-algebra on a space $Z$, $A=F(Z)$.
    This functor $A:\disk\to \mathsf{Spaces}$ sends
    \begin{equation*}
        U\mapsto \coprod_{i\geqslant0} \Conf_i(U)\times_{\Sigma_i}Z^i.
    \end{equation*}
\end{example}

\begin{proposition}
    The factorization homology of $A$ is
    \begin{equation*}
        \int_{M} F(Z) = \coprod_{i\geqslant 0}\Conf_i(M)\times_{\Sigma_i} Z^i.
    \end{equation*}
\end{proposition}

We will need the following lemma.
\begin{lemma}
    The map from the homotopy colimit
    \begin{equation*}
        \colim_{U\in\diskm} \Conf_i(U)\xrightarrow{\sim} \Conf_I(M)
    \end{equation*}
    is a homotopy equivalence.
\end{lemma}
\begin{proof}
    We have
    $\diskm \hookrightarrow \mathsf{Opens}(M)\xrightarrow{\Conf_i} \mathsf{Spaces}$
    which we can look at as
    \begin{equation*}
        {\disk}_{/M} \xrightarrow{\Conf_i}\mathsf{Opens}(\Conf_i(M))\xrightarrow{\id}\mathsf{Spaces}.
    \end{equation*}
    Apply our hypercover lemma to this line: we need to check that for each $\{x_1,\ldots,x_i\}\in\Conf_i(M)$,
    ${\disk}_{/M, \{x_1,\ldots,x_i\}}$ has a contractible classifying space. We have
    already done this in the case when $i=1$. In particular, we just check that the
    category is cofiltered---perform the argument before for each point. Let's check
    the two conditions: given any finite collection of $U_j$ containing the $x_1,\ldots, x_i$,
    there exists $U\subset\cap_j U_j$ (the intersection itself is not a disjoint union of disks)
    with $U\to U_j$ for all $j$. The second condition is again trivial by the fact
    that our category is a poset.
\end{proof}

Notice that this lemma holds for $\Conf_i(U)\times_{\Sigma_i}Z^i$, which we will use
below. Alternatively one might use the fact that products commute with colimits.
In particular $\colim_J Z\times F_j\to Z\times \colim_{j\in J} F_j$ is an equivalence.

\begin{proof}[Proof of proposition]
    Formally, colimits commute so we have
    \begin{align*}
        \colim_{U\in{\disk}_{/M}} \coprod_{i\geqslant 0} \Conf_i(M)\times_{\Sigma_i}Z^i &= \coprod_{i\geq 0}\colim_{U\in{\disk}_{/M}}\left(\Conf_i(U)\times_{\Sigma_i}Z^i\right) \\
        &\simeq \coprod_{i\geqslant 0} \left(\colim_{U\in{\disk}_{/M}}\Conf_i(M)\right) \times_{\Sigma_i} Z^i \\
        &\simeq \coprod_{i\geqslant 0} \Conf_i(M) \times_{\Sigma_i}Z^i,
    \end{align*}
    as desired.
\end{proof}
This proof is written down in the paper \cite{AF} of Ayala and F.

Let's turn to a more complicated example. Recall that we have a functor ${\disk}\xrightarrow{\Maps_c(-,Z)}\mathsf{Spaces}$
for $Z$ a pointed space.
We have a natural map
\begin{equation*}
    \colim\left( {\disk}_{/M}\xrightarrow{\Maps_c(-,Z)}\mathsf{Spaces} \right) \to \colim \left( \mathcal{M}\mathsf{fld}_{n/M}\xrightarrow{\Maps_c(-,Z)}\mathsf{Spaces} \right)
\end{equation*}
identifying the $n$-disks as manifolds.
Notice that the colimit on the right hand side has a category with a final object as its source, whence the colimit
is equivalent to $\Maps_c(M,Z)$. This leads us to the following theorem, due to Segal, Salvatore, and Lurie,
in various formulations.
\begin{theorem}[Nonabelian Poincar\'e duality]
    Let $M$ be an $n$-manifold and $Z$ be an $(n-1)$-connected pointed space. Then the map
    defined above
    \begin{equation*}
        \int_M \Maps_c(-, Z) \xrightarrow{\sim} \Maps_c(M,Z)
    \end{equation*}
    is an equivalence.
    \marginnote{The name comes from the fact that if one takes $Z$ to be an Eilenberg-Maclane space,
    then recover the usual statement of Poincar\'e duality.}
\end{theorem}

\begin{remark}
    Let's see why we need the condition that $\pi_*Z=0$ for $*<n$. Let's first consider the case
    where $Z=S^0$. Let's look at the left-hand side:
    \begin{align*}
        \colim_{U\in{\disk}_{/M}} \Maps_c(U,S^0) \simeq B({\disk}_{/M})
    \end{align*}
    which is connected because between any two objects there is a morphism.
    Now let's look at $\Maps_c(M, S^0)$ for $M$ compact. But now $\Maps_c(M,S^0)=\Maps(M,S^0)$
    has at least 2 components for $M\neq \varnothing$.

    More formally, note that $\Maps_c(\R^n,Z)\simeq \Omega^nZ$. But using the long exact
    sequence on the homotopy groups of a fibration repeatedly, we compute
    \begin{equation*}
        \pi_*\Omega^nZ = \pi_{*+n}Z \quad\text{for}\quad*\geqslant 0.
    \end{equation*}
    In particular, this does not depend on $\pi_*Z$ for $*<n$. So this statement
    could not possibly be true because we could just change the space such
    that only the $<n$ homotopy groups change. In particular, take
    $\tau^{\geq n}Z \xrightarrow{\hofiber} Z \to P_{n-1}Z$ where $P_{n-1}Z$
    is the $n-1$ Postnikov stage:
    \begin{equation*}
        \Maps_c(\R^n,Z) \simeq \Maps_c(\R^n,\tau^{\geq n}Z).
    \end{equation*}
    So the functor on the left will not change, but the functor on the right
    can always detect these by choosing $M$ appropriately. This tells us that
    we had better choose $Z\simeq \tau^{\geq n}Z$.
\end{remark}

Grisha: does the left hand side depend on the map $M\to BO(n)$. John: No,
in particular ${\disk}_{/M}$ only knows about the homeomorphism type of $M$.
Morevoer there is a cancellation of sorts ${\disk}_{/M}^\text{fr}\simeq {\disk}_{/M}$.
Again, this is something you can find in the paper \cite{AF}.

We can think of both sides as functors out of $\mathcal{M}\mathsf{fld}_n$. Given a natural
transformation between to functors out of here, to show it is an equivalence, we might
first show that it is an equivalence on $\R^n$, and then show that the functors satisfy
the same ``gluing/cosheaf'' properties. In particular, do these functors satisfy something
like Mayer-Vietoris?

To prove such a property, one might ``filter'' either $Z$ or $M$. Jacob, in his book, does the
former (via Postnikov stages), while John does it by breaking down $M$. We'll be doing the latter.

\begin{definition}
    For $\mathcal{V}$ a symmetric monoidal $\infty$-category, a \textbf{homology theory
        for $n$-manifolds valued in $\mathcal{V}$} is a symmetric monoidal functor
        \begin{equation*}
            \begin{tikzcd}
                (\mathcal{M}\mathsf{fld}_n,\coprod) \rar & (\mathcal{V},\otimes)
            \end{tikzcd}
        \end{equation*}
        such that whenever $M\cong M' \coprod_{M_\times\R} M''$ for $\dim M_0=n-1$ then
        \begin{equation*}
            F(M')\otimes_{F(M_0\times\R)}F(M'')\to F(M)
        \end{equation*}
        is an equivalence.
\end{definition}

\begin{theorem}
    If we write the collection $\mathcal{H}(\mathcal{M}\mathsf{fld}_n,\mathcal{V})$ for all such
    homology theories, then there is an equivalence
    \begin{equation*}
        \begin{tikzcd}
            \mathcal{H}(\mathcal{M}\mathsf{fld}_n, \mathcal{V}) \rar[bend left]{\ev_{\disk}} & \mathsf{Alg}_{\disk}(\mathcal{V})\lar[bend left]{\int_-}
        \end{tikzcd}
    \end{equation*}
\end{theorem}

\begin{theorem}
    $\Maps_c(-,Z)$ and $\int_- \Maps_c(-,Z)$ are homology theories valued in $\mathsf{Spaces}$.
\end{theorem}


\newpage

\section{Nonabelian Poincar\'e duality II [10/30/2017]}

Let $\mathcal{V}$ be a symmetric monoidal $\infty$-category such that $v\otimes -:\mathcal{V}\to \mathcal{V}$
distributes over all (sifted) colimits, i.e.
\begin{equation*}
    \colim_J (v\otimes F_j)\xrightarrow{\cong}v\otimes\colim_J F_j
\end{equation*}
for all $F:J\to \mathcal{V}$. In this context we stated the equivalence above.
First of all: how do we even know that the thing on the left hand side of our 
excision statement, $F(M')\otimes_{F(M_0\times\R)}F(M'')$, even makes sense?

\begin{definition}
    Define $\mfldd$ to be the topological category with objects manifolds possibly with
    boundary, and morphisms open embeddings. In particular, boundaries must be sent to
    boundaries.
\end{definition}

We will construct $\Delta^\text{op}\to \mfldm$ given a gluing $M\cong M'\cup_{M_0\times\R}M''$.
Then, given a functor $F:\mfld\to \mathcal{V}$ (or into $(\mathsf{Spaces},\times)$), we
can define
\begin{equation*}
    F(M')\otimes_{F(M_0\times\R)}F(M'') := \colim_{\Delta^\text{op}} F
\end{equation*}
as a colimit over the composite. Suppose
%\begin{equation*}
%    \begin{tikzcd}
%        M' \rar[hook]\dar & M\dar & M''\lar[hook]\dar \\
%        \{-1\} \rar[hook] & [-1,1] & \{1\}\lar[hook]
%    \end{tikzcd}
%\end{equation*}
\marginnote{Fix this diagram}
and $M|_{(-1,1)}\cong M_0\times(-1,1)$.
Here we are using the \textbf{homework} fact that $N\cong N\cup_{\partial N}\partial N\times [0,1)$.


\marginnote{Fix the notation here, make the D cal}
Consider now the functor of topological categories (a bit subtle actually)
\begin{equation*}
    \mathsf{Disk}_{1/[-1,1]}^\partial \xrightarrow{\pi^{-1}} \mfldm
\end{equation*}
sending $U\hookrightarrow[-1,1]\mapsto \pi^{-1}U$.

\begin{definition}
    We define $\mathsf{Disk}_n^\partial$ to be the subcategory of $\mfldd$ consisting
    of $\coprod_U \R^n\coprod_j \R^n_{\geq 0}$. Notice it doesn't contain the disk itself.
\end{definition}

\begin{lemma}[AF 3.11]
    There exists a functor $\Delta^\text{op}\to \mathsf{Disk}^{\partial, \text{or}}_{1/[-1,1]}$
    which is final.
\end{lemma}
\begin{proof}
    Define $\mathcal{S}\subset \mathsf{Disk}_{1/[-1,1]}^{\partial, \text{or}}$ to be the
    subcategory of objects $U\subset [-1,1]$ such that $\{-1,1\}\subset U$ and
    \begin{equation*}
        U=[0,\varepsilon)\coprod \R^{\coprod l}\coprod (\delta,1]\hookrightarrow [-1,1].
    \end{equation*}
    This gives us a functor $\mathcal{S}\to \Delta^\text{op}$ sending $U\mapsto \pi_0([-1,1]\setminus U)$,
    i.e. counting the gaps (order it left to right). In fact we claim that $S\simeq \Delta^\text{op}$.
    This is an obvious bijection on the collections of objects. We need to check that
    the spaces of maps
    \begin{equation*}
        \mathsf{Disk}_{1/[-1,1]}^{\partial,\text{or}}([0,\varepsilon)\coprod\R^{\coprod i}\coprod (\delta, 1], [0,\varepsilon')\coprod\R^{\coprod i'}\coprod (\delta',1]) \simeq \Delta([i'],[i]).
    \end{equation*}
    Concretely, let's check that
    \begin{equation*}
        \mathcal{M}\mathsf{fld}_{1/[-1,1]}^{\partial,\text{or}}(\R,\R)\simeq *.
    \end{equation*}
    But this is the homotopy pullback
    \begin{equation*}
        \begin{tikzcd}
            \mathcal{M}\mathsf{fld}_{1/[-1,1]}^{\partial,\text{or}}(\R,\R)\dar \rar & \mathcal{M}\mathsf{fld}_1^{\partial,\text{or}}(\R,\R)\dar \\
            * \rar & \Maps(\R, [-1,1])
        \end{tikzcd}
    \end{equation*}
    by definition of $\infty$-categorical overcategories.
    But the two spaces on the right hand side are contractible, hence we obtain what we wanted.
    This implies the discreteness and hence the equivalence of the mapping spaces.


    Let us check that the functor is final. We use Quillen's theorem A. In particular, we show that
    $B(\mathcal{S}^{V/}\simeq *$ for $V\in\mathsf{Disk}_{1/[-1,1]}^{\partial,\text{or}}$. We have
    \begin{equation*}
        V=[0,\varepsilon)^{\coprod ?} \coprod \R^{\coprod i}\coprod (\delta,1)^{\coprod ?}.
    \end{equation*}
    If $V\in \mathcal{S}$ then $\mathcal{S}^{V/}$ has an initial object whence $B\mathcal{S}^{V/}\simeq *$.
    On the other hand, if $V\in\mathcal{S}$ has neither 0 nor 1 then
    \begin{equation*}
        V' = V\coprod [0,\varepsilon) \coprod (\delta,1]
    \end{equation*}
    is initial in $\mathcal{S}^{V/}$. Indeed, we claim that given any $W\subset [-1,1]$ and an embedding
    $V\hookrightarrow W$, the space of factorizations through $V'$ is contractible.
    But this is just that
    \begin{equation*}
        \mathcal{M}\mathsf{fld}_{/[-1,1]}([0,\varepsilon),[0,\varepsilon'))\simeq *.
    \end{equation*}
    Hence $\mathcal{S}$ is final.
\end{proof}

Now, given $M'\cup_{M_0\times\R}M''$, and a functor $F:\mfld\to \mathcal{V}$, we define
\begin{equation*}
    F(M')\otimes_{F(M_0\times\R)F(M'')}=\colim_{\Delta^\text{op}}F
\end{equation*}
where the functor is the composite
\begin{equation*}
    \Delta^\text{op}\to \mathcal{M}\mathsf{fld}_{1/[-1,1]}^{\partial, \text{or}}\to \mfld\to \mathcal{V},
\end{equation*}
which if $F$ is symmetric monoidal then this is just a two-sided bar construction.

Sam: why did we do this construction instead of just writing it as a bar construction
in the first place?
John: this is not just a normal simplicial object. It's a simplicial object in an
$\infty$-category. Indeed, there is no functor $\Delta^\text{op}\to \mathsf{Mfld}_{n/M}$. We
are useful a flexibility of isotopies and contractibilities to actually build this object.

Now, if $A$ is an $n$-disk algebra in $\mathcal{V}$, we would like to show that $\int_- A$
is a $\otimes$-homology theory, i.e.
\begin{equation*}
    \int_{M'}A\otimes_{\int_{M_0\times \R}A}\int_{M''}A \simeq \int_M A.
\end{equation*}
In fact we will prove something stronger. We will write down a pushforward formula.
Say we are given $f:M\to (N,\partial N)$ with $M|_{int(N)}\to int(N)$ and $M|_{\partial N}\to \partial N$
fiber bundles.
\begin{theorem}
    Given the pushforward
    \begin{equation*}
        f_*A:\mathsf{Disk}_{n/N}^\partial \xrightarrow{f^{-1}}\mfldm\xrightarrow{\int A}\mathcal{V},
    \end{equation*}
    there is an equivalence
    \begin{equation*}
        \int_M A\simeq \int_N f_*A.
    \end{equation*}
\end{theorem}
This will imply that factorization homology is a $\otimes$-homology theory.

\newpage

\section{Nonabelian Poincar\'e duality III [11/01/2017]}

We were proving a pushforward formula for factorization homology. Recall that we have
a map $f:M\to N\supset \partial N$ with the restriction of $f$ to the interior and boundary of $N$
both being fiber bundles.
\begin{definition}
    We define $\mathsf{Disk}_f$ to be the limit of the diagram\marginnote{fix this diagram}
%    \begin{equation*}
%        \begin{tikzcd}
%            \diskm\ar[dr] && \text{Ar}(\mfldm)\ar[dl]{\ev_0}\ar[dr]{\ev_1} && \mathsf{Disk}^\partial_{k/N}\ar[dl]{f^{1}} \\
%            & \mfldm && \mfldm
%        \end{tikzcd}
%    \end{equation*}
    i.e. triples consisting of $k$-disks $U\subset N$, $n$-disks $V\subset M$, with $V\hookrightarrow f^{-1}U$.
\end{definition}
\begin{lemma}
    The map $\mathsf{Disk}_f\xrightarrow{\ev_0}\diskm$ sending $(U,V,V\hookrightarrow f^{-1}U)\mapsto V$
    is final.
\end{lemma}
This lemma is important because it means that the factorization homology can be computed on $\mathsf{Disk}_f$.
Also, looking back at this, it's way more technical than John remembers\ldots he thought that that was his
least technical paper\ldots and maybe it is---just everything he writes is incomprehensible.

\begin{lemma}
    The map $\mathsf{Disk}_{n/M}\to\mathcal{D}\mathsf{isk}_{n/M}$ is a localization.
\end{lemma}
\begin{corollary}
    The map above is final, whence $\int_M A$ is a colimit over either
    $\mathsf{Disk}_{n/M}$ or $\mathcal{D}\mathsf{isk}_{n/M}$.
\end{corollary}
\begin{corollary}
    For any functor $A:\disk\to\mathcal{V}$,
    \begin{equation*}
        \int_M A \simeq \colim\left( \mathsf{Disk}_f\xrightarrow{\ev_0}\mathcal{D}\mathsf{isk}_{n/M}\xrightarrow{A} \mathcal{V} \right).
    \end{equation*}
\end{corollary}

\begin{theorem}
    We have the pushforward formula
    \begin{equation*}
        \int_M A \simeq \int_N f_*A
    \end{equation*}
    where $f_*A:\mathcal{D}\mathsf{isk}_{k/N}^\partial \xrightarrow{f^{-1}} \mathcal{M}\mathsf{fld}_{n/M}\xrightarrow{\int A}\mathcal{V}$.
\end{theorem}

We have
\begin{equation*}
    \begin{tikzcd}
        \mathsf{Disk}_f\dar\rar{\ev_0} &  \mathcal{D}\mathsf{isk}_{n/M}\rar{A} & \mathcal{V} \\
        \mathsf{Disk}^\partial_{k/N}\dar{q} \\
        *
    \end{tikzcd}
\end{equation*}
We note that
\begin{equation*}
    \colim \left( \mathcal{D}\mathsf{isk}_{n/M}\xrightarrow{A} \mathcal{V} \right)\simeq \colim (\mathcal{D}\mathsf{isk}_f\xrightarrow{A\circ\ev_0}\mathcal{V}).
\end{equation*}
If we call the vertical composite $p$, the left-hand side is just $\mathsf{LKan}_p(A\circ\ev_1$ since
colimits are just left Kan extensions to the terminal $\infty$-category. But
\begin{equation*}
    \mathsf{LKan}_p(A\circ\ev_0)\simeq \mathsf{LKan}_q\mathsf{LKan}_{\ev_1}(A\circ \ev_0).
\end{equation*}
Now we need to figure out how to evalute the left Kan extension at 1. Let's take a brief vacation from the proof.

The evaluation maps $\ev_0,\ev_1$ from the category $\text{Ar}(\mathcal{D})$ to $\mathcal{D}$
have some nice properties. The fiber over some object $d\in \mathcal{D}$ is just the undercategory
$\mathcal{D}^{d/}$. Consider
\begin{equation*}
    \mathcal{D}^{d/} \hookrightarrow \text{Ar}(\mathcal{D})^{\ev_0}\times_{\mathcal{D}}\mathcal{D}^{d/} = \text{Ar}(\mathcal{D})^{d/}.
\end{equation*}
This map is a left adjoint. The right adjoint is simple: just compose.\marginnote{John: check this for yourself.}
On the other hand,
\begin{equation*}
    \mathcal{D}_{/d}\hookrightarrow \text{Ar}(\mathcal{D})^{\ev_1}\times_\mathcal{D}\mathcal{D}_{/d}
\end{equation*}
is a right adjoint (again the other is given by composition).
Now recall that left adjoints are initial functors and right adjoints are final.
Observe that given $\pi:\mathcal{A}\to \mathcal{D}$ such that $\mathcal{A}_d\hookrightarrow \mathcal{A}_{/d}=\mathcal{A}\times_\mathcal{D}\mathcal{D}_{/d}$
is final for any $d$, then
\begin{equation*}
    \mathsf{LKan}_\pi F \simeq \colim_{\mathcal{A}_{/d}} F \simeq \colim_{\mathcal{A}_d} F.
\end{equation*}
\begin{definition}
    Such a functor $\pi$ is called a \textbf{locally Cartesian fibration}.
\end{definition}
What we have seen above is that evaluation at 0 and 1 are locally coCartesian and Cartesian fibrations.

Returning from our vacation (which are never as relaxing as you expect) we find that
by the Cartesian fibration property,
\begin{equation*}
    \mathsf{LKan}_{\ev_0}(A\circ \ev_1)(U) \simeq \colim(\mathsf{Disk}_f|_{U}\xrightarrow{A\circ \ev_0} \mathcal{V}).
\end{equation*}
But $\mathsf{Disk}_f|_{U}=\mathsf{Disk}_{n/f^{-1}U}$. Hence we find
\begin{equation*}
    \mathsf{LKan}_{\ev_0}(A\circ \ev_1)(U)=\colim (\mathsf{Disk}_{n/f^{-1}U}\xrightarrow{A} \mathcal{V}) = \int_{f^{-1}U} A =: f_*A(U).
\end{equation*}
But now $\int_M A\simeq \int_N f_*A$, which completes the proof (using the finality of the localization).

There is a bit of a gap here: we used the locally Cartesian fibration property. However, really what
we had was a pullback of a locally Cartesian fibration property. Unfortunately, this property is not
preserved under pullbacks. However we are ok because we have Cartesian, not just locally Cartesian.

What's left is two lemmas. The localization result and the finality result.

\begin{lemma}
    The map $\ev_0:\mathcal{D}\mathsf{isk}_f \to \mathcal{D}\mathsf{isk}_{n/M}$ is final.
\end{lemma}
\begin{proof}
    We use Quillen's theorem A, which says that $\mathcal{F}\to \mathcal{D}$ is final if
    $B(\mathcal{F}^{d/})\simeq *$ for all $d\in \mathcal{D}$. So for any $V\in\mathcal{D}\mathsf{isk}_{n/M}$
    we need to check that $B(\mathcal{D}\mathsf{isk}_f^{V/})\simeq *$. Recall that $\ev_0$
    is a (locally) Cartesian fibration. This means that the fiber of $\ev_0$ included into
    the undercategory
    \begin{equation*}
        \mathcal{D}\mathsf{isk}_f|_{V}\hookrightarrow \mathcal{D}\mathsf{isk}_f^{V/}
    \end{equation*}
    is a left adjoint.
    Now we recall that if we are given an adjunction between $\mathcal{C}$ and $\mathcal{D}$ by $F$ and $G$.
    This implies an equivalence of classifying spaces $B\mathcal{C}\simeq B\mathcal{D}$ (just
    a special case of being final or initial since the classifying space functor is a colimit
    of the constant functor; alternatively just look at how the unit/counit maps give you homotopies).
    This implies that we can show instead that the fiber over $V$, $\mathcal{D}\mathsf{isk}_f|_{V}$, has
    contractible classifying space. This category consists of $k$-disks $U\subset N$ with
    $V\hookrightarrow f^{-1}U$. We don't have much time left, but the basic idea is to use the
    hypercover argument.
\end{proof}

Yajit: how to make the ``colliding points'' picture of factorization homology precise?
John: consider the subcategory $\mathcal{D}\mathsf{isk}_{n/M}^\text{surj}\subset \mathsf{Disk}_{n/M}$
which is surjective on $\pi_0$. This subcategory is the exit-path infinity category of the Ran
space $\mathsf{Ran}(M)$. But $\Fun(\text{Exit}(\mathsf{Ran} M), \mathcal{V})$ are constructible
cosheaves on $\mathsf{Ran}(M)$, and then $\int_M A=\Gamma(\mathsf{Ran}, A)$.


\newpage








\newpage

\appendix

\section{Exercises}

\begin{exercise}
    Construct homotopy equivalences
    \begin{equation*}
        \Emb(\R^n,\R^n) \simeq \Diff(\R^n) \simeq GL(n) \simeq O(n).
    \end{equation*}
\end{exercise}

\begin{exercise}
    Show that homotopy pullbacks are homotopy invariant.
\end{exercise}

\begin{exercise}
    Show that compactly supported maps are covariant along open inclusions; in particular given an
    open inclusion $U\hookrightarrow V$, the induced map of spaces
    $\Maps_c(U,Z)\to \Maps_c(V,Z)$ is continuous. Here the topology on the mapping spaces is
    inherited from $\Maps_*(U^+,Z)$.
\end{exercise}

\begin{exercise}
    Fill in the details of the proof that $\hocolim$ is homotopy invariant.
\end{exercise}

\begin{exercise}
    Prove that there is a homeomorphism $|\Delta[n]|\cong \Delta^n$. Moreover, show that
    the geometric realization $|X|$ of a simplicial set $X$ has the structure of a CW
    complex with an $n$-cell for each nondegenerate $n$-simplex.
\end{exercise}

\begin{exercise}
    Show $\Delta[n]\star \Delta[m]\cong \Delta[n+m+1]$ and the corresponding statement
    for horns.
\end{exercise}

\begin{exercise}
    Fill in the proof of Proposition 1.2.4.3 of HTT. In particular, show that $\phi$ and
    $\psi$ are indeed inverse.
\end{exercise}

\begin{exercise}
    Prove that a localization $\mathcal{C}\to \mathcal{D}$ of $\infty$-categories are
    both initial and final.
\end{exercise}

\begin{exercise}
    Show, for functors between ordinary categories, that a left Kan extension of a
    functor $F:\mathcal{C}\to \mathcal{E}$ along a functor $g:\mathcal{C}\to \mathcal{D}$
    is given by the formula
    \begin{equation*}
        g_!F(d) = \colim_{\mathcal{C}/d} F.
    \end{equation*}
\end{exercise}

% TODO write out some of the homeworks/details here

\newpage

\bibliographystyle{alpha}

\bibliography{references}



\end{document}

